"use strict";(self["webpackChunkcosmos_telegram_signer"]=self["webpackChunkcosmos_telegram_signer"]||[]).push([[350],{54636:function(e,a,t){t.d(a,{A:function(){return h}});var n=t(56768),l=t(45130),o=t(24113),s=t(90144);const r=e=>((0,n.Qi)("data-v-33f4e966"),e=e(),(0,n.jt)(),e),u=o+"#ic_arrow_hor",c=o+"#ic_search",i=o+"#ic_close",v={class:"search"},d=r((()=>(0,n.Lk)("span",null,[(0,n.Lk)("svg",null,[(0,n.Lk)("use",{"xlink:href":u})])],-1))),k=[d],_={class:"field"},m=r((()=>(0,n.Lk)("svg",{class:"icon"},[(0,n.Lk)("use",{"xlink:href":c})],-1))),p=["placeholder"],b=r((()=>(0,n.Lk)("svg",null,[(0,n.Lk)("use",{"xlink:href":i})],-1))),f=[b];var g={__name:"Search",props:["source"],setup(e){const a=e,t=(0,n.WQ)("emitter"),o=(0,s.KR)("");function r(){t.emit("show_keyboard"),setTimeout((()=>t.emit("search_focus")),100)}function u(){t.emit("hide_keyboard"),setTimeout((()=>t.emit("search_blur")),100)}function c(){t.emit("search",{query:o.value,source:a.source})}function i(){o.value="",t.emit("search",{query:o.value,source:a.source})}return(e,a)=>((0,n.uX)(),(0,n.CE)("div",v,[(0,n.Lk)("button",{class:"back_btn",onClick:(0,l.D$)(u,["prevent"])},k),(0,n.Lk)("div",_,[m,(0,n.bo)((0,n.Lk)("input",{type:"text","onUpdate:modelValue":a[0]||(a[0]=e=>o.value=e),class:"input",placeholder:e.$t("message.search_placeholder"),onFocus:r,onBlur:u,onInput:c},null,40,p),[[l.Jo,o.value]]),o.value.length?((0,n.uX)(),(0,n.CE)("button",{key:0,class:"clear_btn",onClick:a[1]||(a[1]=(0,l.D$)((e=>i()),["prevent"]))},f)):(0,n.Q3)("",!0)])]))}},y=t(71241);const L=(0,y.A)(g,[["__scopeId","data-v-33f4e966"]]);var h=L},30112:function(e,a,t){t.d(a,{A:function(){return B}});t(44114);var n=t(56768),l=t(90144),o=t(24232),s=t(76750),r=t(61981),u=t(17086),c=t(54636),i=t(24113);const v=e=>((0,n.Qi)("data-v-2a50009b"),e=e(),(0,n.jt)(),e),d=i+"#ic_check",k={class:"token"},_={class:"logo"},m=["src"],p={key:0,class:"check"},b=v((()=>(0,n.Lk)("svg",null,[(0,n.Lk)("use",{"xlink:href":d})],-1))),f=[b],g={class:"denom"},y={class:"amount"},L={class:"val"},h={class:"cost"};var R={__name:"AvailableTokensItem",props:{balance:{type:Object,default:()=>({})},currentToken:{type:Object,default:()=>({denom:""})}},setup(e){const a=e,t=(0,s.o)();function u(e){return e===a.currentToken.denom}return(e,s)=>{const c=(0,n.g2)("router-link");return(0,n.uX)(),(0,n.Wv)(c,{to:`/account/send?denom=${a.balance.denom}`,class:(0,o.C4)(["token_wrap",{current:u(a.balance.denom)}])},{default:(0,n.k6)((()=>[(0,n.Lk)("div",k,[(0,n.Lk)("div",_,[(0,n.Lk)("img",{src:a.balance.token_info.logo_URIs.svg,alt:"",loading:"lazy"},null,8,m),u(a.balance.denom)?((0,n.uX)(),(0,n.CE)("div",p,f)):(0,n.Q3)("",!0)]),(0,n.Lk)("div",g,(0,o.v_)(a.balance.token_info.symbol),1),(0,n.Lk)("div",y,[(0,n.Lk)("div",L,(0,o.v_)((0,l.R1)(r.NJ)(a.balance.amount,a.balance.exponent).toLocaleString("ru-RU",{maximumFractionDigits:7}).replace(",",".")),1),(0,n.Lk)("div",h,(0,o.v_)((0,l.R1)(r.ST)((0,l.R1)(r.Y$)(a.balance.token_info.symbol,a.balance.amount,a.balance.exponent)))+" "+(0,o.v_)((0,l.R1)(t).currentCurrencySymbol),1)])])])),_:1},8,["to","class"])}}},x=t(71241);const w=(0,x.A)(R,[["__scopeId","data-v-2a50009b"]]);var C=w;const T={class:"available_tokens"},A={class:"cont"},$={key:1,class:"tokens"},E={key:0,class:"count"},X={key:1,class:"list"},F={key:2,class:"empty"};var W={__name:"AvailableTokens",props:["currentToken"],setup(e){const a=e,t=(0,s.o)(),i=(0,n.WQ)("emitter"),v=(0,l.KR)([]);return(0,n.KC)((()=>{t.isBalancesGot&&(v.value=t.balances)})),(0,n.wB)((0,n.EW)((()=>t.isBalancesGot)),(()=>{t.isBalancesGot&&(v.value=t.balances)})),i.on("search",(({query:e,source:a})=>{if("availabels"===a){v.value=[];for(let a in t.balances)t.balances[a].token_info.symbol.toLocaleLowerCase().includes(e.toLocaleLowerCase())&&v.value.push(t.balances[a])}})),(e,s)=>((0,n.uX)(),(0,n.CE)("section",T,[(0,n.Lk)("div",A,[(0,n.bF)(c.A,{source:"availabels"}),(0,l.R1)(t).isInitialized&&(0,l.R1)(t).isBalancesGot?((0,n.uX)(),(0,n.CE)("div",$,[v.value.length===(0,l.R1)(t).balances.length?((0,n.uX)(),(0,n.CE)("div",E,[(0,n.Lk)("b",null,(0,o.v_)((0,l.R1)(t).balances.length),1),(0,n.eW)(" "+(0,o.v_)(e.$t("message.available_tokens_title")),1)])):(0,n.Q3)("",!0),v.value.length?((0,n.uX)(),(0,n.CE)("div",X,[((0,n.uX)(!0),(0,n.CE)(n.FK,null,(0,n.pI)(v.value,((e,t)=>((0,n.uX)(),(0,n.CE)("div",{class:"item",key:t,style:(0,o.Tr)(`order: ${parseInt(-1e6*(0,l.R1)(r.Y$)(e.token_info.symbol,e.amount,e.exponent))};`)},[(0,n.bF)(C,{balance:e,currentToken:a.currentToken},null,8,["balance","currentToken"])],4)))),128))])):((0,n.uX)(),(0,n.CE)("div",F,(0,o.v_)(e.$t("message.search_empty")),1))])):((0,n.uX)(),(0,n.Wv)(u.A,{key:0}))])]))}};const Q=(0,x.A)(W,[["__scopeId","data-v-d46f343a"]]);var B=Q},60889:function(e,a,t){t.d(a,{A:function(){return k}});var n=t(56768),l=t(45130),o=t(24113);const s=e=>((0,n.Qi)("data-v-721280d5"),e=e(),(0,n.jt)(),e),r=o+"#ic_scaner",u=s((()=>(0,n.Lk)("svg",{class:"icon"},[(0,n.Lk)("use",{"xlink:href":r})],-1))),c=[u];var i={__name:"QRCodeScanner",setup(e){function a(){Telegram.WebApp.showScanQrPopup({text:""})}return(e,t)=>((0,n.uX)(),(0,n.CE)("button",{class:"btn",onClick:t[0]||(t[0]=(0,l.D$)((e=>a()),["prevent"]))},c))}},v=t(71241);const d=(0,v.A)(i,[["__scopeId","data-v-721280d5"]]);var k=d},75145:function(e,a,t){t.r(a),t.d(a,{default:function(){return ie}});t(44114);var n=t(56768),l=t(24232),o=t(45130),s=t(90144),r=t(24113),u=t(76750),c=t(81387),i=t(67278),v=t(89354),d=t(61981),k=t(17086),_=t(30112);const m=e=>((0,n.Qi)("data-v-76033aec"),e=e(),(0,n.jt)(),e),p=r+"#ic_arrow_hor",b={class:"page_container inner_page_container tokens_page"},f={class:"cont"},g={class:"head"},y=m((()=>(0,n.Lk)("svg",{class:"icon"},[(0,n.Lk)("use",{"xlink:href":p})],-1))),L=[y],h={class:"page_title"};var R={__name:"TokensModal",props:["currentToken"],setup(e){const a=e,t=(0,n.WQ)("emitter");return(e,o)=>((0,n.uX)(),(0,n.CE)("section",b,[(0,n.Lk)("div",f,[(0,n.Lk)("div",g,[(0,n.Lk)("button",{class:"back_btn",onClick:o[0]||(o[0]=e=>(0,s.R1)(t).emit("close_tokens_modal"))},L),(0,n.Lk)("div",h,(0,l.v_)(e.$t("message.tokens_page_title")),1)]),(0,n.bF)(_.A,{class:"inside_modal",currentToken:a.currentToken},null,8,["currentToken"])])]))}},x=t(71241);const w=(0,x.A)(R,[["__scopeId","data-v-76033aec"]]);var C=w,T=t(84103),A=t(86255),$=t(60889);const E=e=>((0,n.Qi)("data-v-3c63c392"),e=e(),(0,n.jt)(),e),X=r+"#ic_arrow_hor",F={class:"page_container inner_page_container send"},W={class:"cont"},Q={class:"head"},B=E((()=>(0,n.Lk)("svg",{class:"icon"},[(0,n.Lk)("use",{"xlink:href":X})],-1))),N={class:"page_title"},I={class:"token"},K={class:"logo"},S=["src"],q={class:"denom"},D={class:"amount"},J={class:"val"},M={class:"cost"},U={class:"token"},j={class:"logo"},O=["src"],V={class:"denom"},G={class:"amount"},Y=E((()=>(0,n.Lk)("div",{class:"val"},"0",-1))),z={class:"cost"},H={class:"address"},P={class:"field_label"},Z={class:"field"},ee={class:"amount_field"},ae={class:"field_label"},te={class:"cost"},ne={class:"field"},le={class:"memo_field"},oe={class:"field_label"},se={class:"field"},re={class:"btns"};var ue={__name:"Send",setup(e){const a=(0,u.o)(),t=(0,c.rd)(),r=(0,c.lq)(),_=(0,n.WQ)("emitter"),m=(0,n.WQ)("i18n"),p=(0,i.hN)(),b=(0,s.KR)(a.balances.find((e=>e.denom===r.query.denom))),f=(0,s.KR)(null),g=(0,s.KR)(r.query.address||""),y=(0,s.KR)(r.query.amount||""),L=(0,s.KR)(""),h=(0,s.KR)(!1),R=(0,s.KR)(!1),x=(0,s.KR)([]),w=(0,s.KR)(!1),E=(0,s.KR)(!1),X=(0,s.KR)(!1),ue=(0,s.KR)((0,n.EW)((()=>E.value&&X.value)));function ce(){g.value="",y.value="",L.value="",w.value=!1,E.value=!1,X.value=!1,f.value.classList.remove("error"),b.value=a.balances.find((e=>e.denom===r.query.denom)),r.query.address&&(g.value=r.query.address,ie()),_.emit("close_any_modal")}function ie(){try{let{prefix:e,data:t}=(0,v.fromBech32)(g.value);e==a.networks[a.currentNetwork].prefix&&t.length==a.networks[a.currentNetwork].address_length?(f.value.classList.remove("error"),X.value=!0):(f.value.classList.add("error"),X.value=!1)}catch(e){f.value.classList.add("error"),X.value=!1}}function ve(){E.value=!1,setTimeout((()=>{y.value=(0,d.NJ)(b.value.amount,b.value.exponent),E.value=!0}))}function de(){E.value=!1,setTimeout((()=>{y.value.length&&y.value<=0&&(y.value=""),y.value&&y.value>0&&y.value<(0,d.NJ)(b.value.amount,b.value.exponent)&&(E.value=!0),y.value>(0,d.NJ)(b.value.amount,b.value.exponent)&&ve()}))}function ke(){navigator.clipboard.readText().then((e=>{try{let{prefix:t,data:n}=(0,v.fromBech32)(e);t==a.networks[a.currentNetwork].prefix&&n.length==a.networks[a.currentNetwork].address_length?g.value=e:p.notify({group:"default",speed:200,duration:1e3,title:m.global.t("message.notification_tx_error_title"),text:m.global.t("message.notification_error_invalid_paste_title"),type:"error"})}catch(t){p.notify({group:"default",speed:200,duration:1e3,title:m.global.t("message.notification_tx_error_title"),text:m.global.t("message.notification_error_invalid_paste_title"),type:"error"})}}))}async function _e(){w.value=!0;try{a.TxFee.isRemember&&await a.updateTxFeeInfo();let e=await(0,d.qS)(x.value,L.value);p.notify({group:"default",clean:!0}),p.notify({group:"default",speed:200,duration:-100,title:m.global.t("message.notification_tx_pending_title"),type:"pending",data:{isCollapsible:!0,explorer_link:(0,d.aS)(a.currentNetwork)}}),(0,d.nw)(e).catch((e=>{console.log(e),me(e)})),a.checkTxResult(),t.push("/account")}catch(e){console.log(e),me(e)}}function me(e){w.value=!1;let t="";t=e.code?m.global.t(`message.notification_tx_error_${e.code}`):m.global.t("message.notification_tx_error_rejected"),p.notify({group:"default",clean:!0}),p.notify({group:"default",speed:200,duration:6e3,title:m.global.t("message.notification_tx_error_title"),text:t,type:"error"}),a.networks[a.currentNetwork].currentTxHash=null,a.resetTxFee()}function pe(){h.value=!0}function be(){R.value=!0,a.isAnyModalOpen=!0}return(0,n.sV)((()=>{g.value&&ie(),y.value&&de(),Telegram.WebApp.onEvent("qrTextReceived",(()=>{ce()}))})),(0,n.hi)((()=>{_.off("auth"),_.off("close_sign_tx_modal"),Telegram.WebApp.offEvent("qrTextReceived")})),(0,n.wB)((0,n.EW)((()=>r.query.denom)),(()=>{ce()})),(0,n.wB)((0,n.EW)((()=>r.query.address)),(()=>{ce()})),(0,n.wB)((0,n.EW)((()=>ue.value)),(()=>{ue.value&&(x.value=[{typeUrl:"/cosmos.bank.v1beta1.MsgSend",value:{fromAddress:a.currentAddress,toAddress:g.value,amount:[{denom:b.value.denom,amount:""+parseFloat(y.value.toString().replace(",",".")).toFixed(b.value.exponent)*Math.pow(10,b.value.exponent)}]}}])})),_.on("auth",(()=>{R.value=!1,a.isAnyModalOpen=!1,_e()})),_.on("close_tokens_modal",(()=>{h.value=!1})),_.on("close_sign_tx_modal",(()=>{R.value=!1,a.isAnyModalOpen=!1})),_.on("close_any_modal",(()=>{h.value=!1,R.value=!1,a.isAnyModalOpen=!1})),(e,t)=>{const r=(0,n.g2)("router-link");return(0,n.uX)(),(0,n.CE)(n.FK,null,[(0,n.Lk)("section",F,[w.value?((0,n.uX)(),(0,n.Wv)(k.A,{key:0})):(0,n.Q3)("",!0),(0,n.Lk)("div",W,[(0,n.Lk)("div",Q,[(0,n.bF)(r,{to:"/account",class:"back_btn"},{default:(0,n.k6)((()=>[B])),_:1}),(0,n.Lk)("div",N,(0,l.v_)(e.$t("message.send_page_title")),1)]),b.value?((0,n.uX)(),(0,n.CE)("div",{key:0,class:"token_wrap",onClick:t[0]||(t[0]=(0,o.D$)((e=>pe()),["prevent"]))},[(0,n.Lk)("div",I,[(0,n.Lk)("div",K,[(0,n.Lk)("img",{src:b.value.token_info.logo_URIs.svg,alt:"",loading:"lazy"},null,8,S)]),(0,n.Lk)("div",q,(0,l.v_)(b.value.token_info.symbol),1),(0,n.Lk)("div",D,[(0,n.Lk)("div",J,(0,l.v_)((0,s.R1)(d.NJ)(b.value.amount,b.value.exponent).toLocaleString("ru-RU",{maximumFractionDigits:7}).replace(",",".")),1),(0,n.Lk)("div",M,(0,l.v_)((0,s.R1)(d.ST)((0,s.R1)(d.Y$)(b.value.token_info.symbol,b.value.amount,b.value.exponent)))+" "+(0,l.v_)((0,s.R1)(a).currentCurrencySymbol),1)])])])):((0,n.uX)(),(0,n.CE)("div",{key:1,class:"token_wrap",onClick:t[1]||(t[1]=(0,o.D$)((e=>pe()),["prevent"]))},[(0,n.Lk)("div",U,[(0,n.Lk)("div",j,[(0,n.Lk)("img",{src:(0,s.R1)(d.oB)((0,s.R1)(a).networks[(0,s.R1)(a).currentNetwork].chain_id),alt:""},null,8,O)]),(0,n.Lk)("div",V,(0,l.v_)((0,s.R1)(a).networks[(0,s.R1)(a).currentNetwork].token_name),1),(0,n.Lk)("div",G,[Y,(0,n.Lk)("div",z," 0.00 "+(0,l.v_)((0,s.R1)(a).currentCurrencySymbol),1)])])])),(0,n.Lk)("div",H,[(0,n.Lk)("div",P,(0,l.v_)(e.$t("message.send_address_label")),1),(0,n.Lk)("div",Z,[(0,n.bo)((0,n.Lk)("input",{type:"text",class:"input big","onUpdate:modelValue":t[2]||(t[2]=e=>g.value=e),ref_key:"addressInput",ref:f,onTouchend:t[3]||(t[3]=e=>(0,s.R1)(_).emit("show_keyboard")),onBlur:t[4]||(t[4]=e=>(0,s.R1)(_).emit("hide_keyboard")),onInput:t[5]||(t[5]=e=>ie()),onPaste:t[6]||(t[6]=e=>ie())},null,544),[[o.Jo,g.value]]),(0,n.Lk)("button",{class:"paste_btn",onClick:t[7]||(t[7]=(0,o.D$)((e=>ke()),["prevent"]))},(0,l.v_)(e.$t("message.btn_paste")),1),(0,n.bF)($.A,{class:"in_field"})])]),(0,n.Lk)("div",ee,[(0,n.Lk)("div",ae,[(0,n.eW)((0,l.v_)(e.$t("message.send_amount_label"))+" ",1),(0,n.Lk)("div",te,(0,l.v_)((0,s.R1)(d.ST)((0,s.R1)(d.Y$)((0,s.R1)(a).networks[(0,s.R1)(a).currentNetwork].token_name,y.value*Math.pow(10,(0,s.R1)(a).networks[(0,s.R1)(a).currentNetwork].exponent),(0,s.R1)(a).networks[(0,s.R1)(a).currentNetwork].exponent)))+" "+(0,l.v_)((0,s.R1)(a).currentCurrencySymbol),1)]),(0,n.Lk)("div",ne,[(0,n.bo)((0,n.Lk)("input",{type:"number",inputmode:"numeric",class:"input big","onUpdate:modelValue":t[8]||(t[8]=e=>y.value=e),placeholder:"0.00",onFocus:t[9]||(t[9]=e=>(0,s.R1)(_).emit("show_keyboard",e.target)),onBlur:t[10]||(t[10]=e=>(0,s.R1)(_).emit("hide_keyboard")),onInput:t[11]||(t[11]=e=>de())},null,544),[[o.Jo,y.value]]),(0,n.Lk)("button",{type:"button",class:"max_btn",onClick:(0,o.D$)(ve,["prevent"])},(0,l.v_)(e.$t("message.btn_MAX")),1)])]),(0,n.Lk)("div",le,[(0,n.Lk)("div",oe,(0,l.v_)(e.$t("message.memo_label")),1),(0,n.Lk)("div",se,[(0,n.bo)((0,n.Lk)("input",{type:"text",class:"input big","onUpdate:modelValue":t[12]||(t[12]=e=>L.value=e),onFocus:t[13]||(t[13]=e=>(0,s.R1)(_).emit("show_keyboard",e.target)),onBlur:t[14]||(t[14]=e=>(0,s.R1)(_).emit("hide_keyboard"))},null,544),[[o.Jo,L.value]])])]),ue.value?((0,n.uX)(),(0,n.Wv)(T.A,{key:2,msgAny:x.value,txType:"send"},null,8,["msgAny"])):(0,n.Q3)("",!0),(0,n.Lk)("div",re,[(0,s.R1)(a).networks[(0,s.R1)(a).currentNetwork].currentTxHash?((0,n.uX)(),(0,n.CE)("button",{key:1,class:"btn waiting_btn",onClick:t[16]||(t[16]=(0,o.D$)((e=>(0,s.R1)(_).emit("show_collapsible_notification")),["prevent"]))},[(0,n.Lk)("span",null,(0,l.v_)(e.$t("message.btn_waiting_tx")),1)])):((0,n.uX)(),(0,n.CE)("button",{key:0,class:(0,l.C4)(["btn",{disabled:!(0,s.R1)(a).TxFee.isEnough}]),onClick:t[15]||(t[15]=(0,o.D$)((e=>be()),["prevent"]))},[(0,n.Lk)("span",null,(0,l.v_)(e.$t("message.btn_send")),1)],2))])])]),(0,n.bF)(o.eB,{name:"from_right"},{default:(0,n.k6)((()=>[h.value?((0,n.uX)(),(0,n.Wv)(C,{key:0,currentToken:b.value},null,8,["currentToken"])):(0,n.Q3)("",!0)])),_:1}),(0,n.bF)(o.eB,{name:"modal"},{default:(0,n.k6)((()=>[R.value?((0,n.uX)(),(0,n.Wv)(A.A,{key:0})):(0,n.Q3)("",!0)])),_:1}),(0,n.bF)(o.eB,{name:"fade"},{default:(0,n.k6)((()=>[R.value?((0,n.uX)(),(0,n.CE)("div",{key:0,class:"modal_overlay",onClick:t[17]||(t[17]=(0,o.D$)((e=>(0,s.R1)(_).emit("close_any_modal")),["prevent"]))})):(0,n.Q3)("",!0)])),_:1})],64)}}};const ce=(0,x.A)(ue,[["__scopeId","data-v-3c63c392"]]);var ie=ce}}]);
//# sourceMappingURL=350.fa08b3cc.js.map