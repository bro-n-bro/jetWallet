"use strict";(self["webpackChunkcosmos_telegram_signer"]=self["webpackChunkcosmos_telegram_signer"]||[]).push([[743],{51673:function(e,a,t){t.d(a,{A:function(){return _}});var n=t(56768),l=t(45130),o=t(24113);const s=e=>((0,n.Qi)("data-v-178c8d2c"),e=e(),(0,n.jt)(),e),u=o+"#ic_scaner",r=s((()=>(0,n.Lk)("svg",{class:"icon"},[(0,n.Lk)("use",{"xlink:href":u})],-1))),i=[r];var c={__name:"QRCodeScanner",setup(e){function a(){Telegram.WebApp.showScanQrPopup({text:"Наш текст"})}return(e,t)=>((0,n.uX)(),(0,n.CE)("button",{class:"btn",onClick:t[0]||(t[0]=(0,l.D$)((e=>a()),["prevent"]))},i))}},d=t(71241);const v=(0,d.A)(c,[["__scopeId","data-v-178c8d2c"]]);var _=v},71477:function(e,a,t){t.r(a),t.d(a,{default:function(){return j}});t(44114);var n=t(56768),l=t(24232),o=t(90144),s=t(45130),u=t(24113),r=t(76750),i=t(81387),c=t(67278),d=t(89354),v=t(61981),_=t(17086),k=t(64951),m=t(29234),p=t(51673);const f=e=>((0,n.Qi)("data-v-06f422b2"),e=e(),(0,n.jt)(),e),b=u+"#ic_arrow_hor",g={class:"page_container inner_page_container send"},y={class:"cont"},R={class:"head"},h=f((()=>(0,n.Lk)("svg",{class:"icon"},[(0,n.Lk)("use",{"xlink:href":b})],-1))),x={class:"page_title"},L={class:"token_wrap"},w={class:"token"},C={class:"logo"},A=["src","alt"],$={class:"denom"},F={class:"amount"},T={class:"val"},K={class:"cost"},N={class:"address"},S={class:"field_label"},q={class:"field"},W={class:"amount_field"},Q={class:"field_label"},E={class:"cost"},X={class:"field"},I={class:"memo_field"},J={class:"field_label"},B={class:"field"},U={class:"btns"};var D={__name:"Send",setup(e){const a=(0,r.o)(),t=(0,i.rd)(),u=(0,i.lq)(),f=(0,n.WQ)("emitter"),b=(0,n.WQ)("i18n"),D=(0,c.hN)(),M=(0,o.KR)(a.balances.find((e=>e.denom===u.query.denom))),V=(0,o.KR)(null),j=(0,o.KR)(""),H=(0,o.KR)(""),P=(0,o.KR)(""),Y=(0,o.KR)(!1),z=(0,o.KR)([]),G=(0,o.KR)(!1),O=(0,o.KR)(!1),Z=(0,o.KR)((0,n.EW)((()=>O.value&&ee())));function ee(){try{let{prefix:e,data:t}=(0,d.fromBech32)(j.value);if(e==M.value.chain_info.bech32_prefix&&t.length==a.networks[a.currentNetwork].address_length)return V.value.classList.remove("error"),!0}catch(e){return V.value.classList.add("error"),!1}}function ae(){O.value=!1,setTimeout((()=>{H.value=(0,v.NJ)(M.value.amount,M.value.exponent),O.value=!0}))}function te(){O.value=!1,setTimeout((()=>{H.value.length&&H.value<=0&&(H.value=""),H.value.length&&H.value>0&&H.value<(0,v.NJ)(M.value.amount,M.value.exponent)&&(O.value=!0),H.value>(0,v.NJ)(M.value.amount,M.value.exponent)&&ae()}))}async function ne(){G.value=!0;try{a.TxFee.isRemember&&await a.updateTxFeeInfo();let e=await(0,v.qS)(z.value,P.value);D.notify({group:"default",clean:!0}),D.notify({group:"default",speed:200,duration:-100,title:b.global.t("message.notification_tx_pending_title"),type:"pending",data:{isCollapsible:!0,explorer_link:(0,v.aS)(a.currentNetwork)}}),(0,v.nw)(e).catch((e=>{console.log(e),le(e)})),a.checkTxResult(),t.push("/account")}catch(e){console.log(e),le(e)}}function le(e){G.value=!1;let t="";t=e.code?b.global.t(`message.notification_tx_error_${e.code}`):b.global.t("message.notification_tx_error_rejected"),D.notify({group:"default",clean:!0}),D.notify({group:"default",speed:200,duration:6e3,title:b.global.t("message.notification_tx_error_title"),text:t,type:"error"}),a.networks[a.currentNetwork].currentTxHash=null,a.resetTxFee()}return(0,n.KC)((()=>{if(u.query.data){let e=u.query.data.split("|");"send"===e[0]&&(j.value=e[1],H.value=e[2])}})),(0,n.sV)((()=>{j.value&&ee(),H.value&&te()})),(0,n.wB)((0,n.EW)((()=>u.query.data)),(()=>{if(u.query.denom&&(M.value=a.balances.find((e=>e.denom===u.query.denom))),u.query.data){let e=u.query.data.split("|");"send"===e[0]&&(j.value=e[1],H.value=e[2]),j.value&&ee(),H.value&&te()}})),(0,n.wB)((0,n.EW)((()=>Z.value)),(()=>{Z.value&&(z.value=[{typeUrl:"/cosmos.bank.v1beta1.MsgSend",value:{fromAddress:a.currentAddress,toAddress:j.value,amount:[{denom:M.value.denom,amount:""+parseFloat(H.value.toString().replace(",",".")).toFixed(M.value.exponent)*Math.pow(10,M.value.exponent)}]}}])})),(0,n.hi)((()=>{f.off("auth"),f.off("close_sign_tx_modal")})),f.on("auth",(()=>{Y.value=!1,ne()})),f.on("close_sign_tx_modal",(()=>{Y.value=!1})),(e,t)=>{const u=(0,n.g2)("router-link");return(0,n.uX)(),(0,n.CE)(n.FK,null,[(0,n.Lk)("section",g,[G.value?((0,n.uX)(),(0,n.Wv)(_.A,{key:0})):(0,n.Q3)("",!0),(0,n.Lk)("div",y,[(0,n.Lk)("div",R,[(0,n.bF)(u,{to:"/account",class:"back_btn"},{default:(0,n.k6)((()=>[h])),_:1}),(0,n.Lk)("div",x,(0,l.v_)(e.$t("message.send_page_title")),1)]),(0,n.Lk)("div",L,[(0,n.Lk)("div",w,[(0,n.Lk)("div",C,[(0,n.Lk)("img",{src:M.value.token_info.logo_URIs.svg,alt:M.value.token_info.name,loading:"lazy"},null,8,A)]),(0,n.Lk)("div",$,(0,l.v_)(M.value.token_info.symbol),1),(0,n.Lk)("div",F,[(0,n.Lk)("div",T,(0,l.v_)((0,o.R1)(v.NJ)(M.value.amount,M.value.exponent).toLocaleString("ru-RU",{maximumFractionDigits:7}).replace(",",".")),1),(0,n.Lk)("div",K,(0,l.v_)((0,o.R1)(v.ST)((0,o.R1)(v.Y$)(M.value.token_info.symbol,M.value.amount,M.value.exponent)))+" "+(0,l.v_)((0,o.R1)(a).currentCurrencySymbol),1)])])]),(0,n.Lk)("div",N,[(0,n.Lk)("div",S,(0,l.v_)(e.$t("message.send_address_label")),1),(0,n.Lk)("div",q,[(0,n.bo)((0,n.Lk)("input",{type:"text",class:"input big","onUpdate:modelValue":t[0]||(t[0]=e=>j.value=e),ref_key:"addressInput",ref:V,onFocus:t[1]||(t[1]=e=>(0,o.R1)(f).emit("show_keyboard")),onBlur:t[2]||(t[2]=e=>(0,o.R1)(f).emit("hide_keyboard")),onInput:t[3]||(t[3]=e=>ee()),onPaste:t[4]||(t[4]=e=>ee())},null,544),[[s.Jo,j.value]]),(0,n.bF)(p.A,{class:"in_field"})])]),(0,n.Lk)("div",W,[(0,n.Lk)("div",Q,[(0,n.eW)((0,l.v_)(e.$t("message.send_amount_label"))+" ",1),(0,n.Lk)("div",E,(0,l.v_)((0,o.R1)(v.ST)((0,o.R1)(v.Y$)((0,o.R1)(a).networks[(0,o.R1)(a).currentNetwork].token_name,H.value*Math.pow(10,(0,o.R1)(a).networks[(0,o.R1)(a).currentNetwork].exponent),(0,o.R1)(a).networks[(0,o.R1)(a).currentNetwork].exponent)))+" "+(0,l.v_)((0,o.R1)(a).currentCurrencySymbol),1)]),(0,n.Lk)("div",X,[(0,n.bo)((0,n.Lk)("input",{type:"number",inputmode:"numeric",class:"input big","onUpdate:modelValue":t[5]||(t[5]=e=>H.value=e),placeholder:"0.00",onFocus:t[6]||(t[6]=e=>(0,o.R1)(f).emit("show_keyboard")),onBlur:t[7]||(t[7]=e=>(0,o.R1)(f).emit("hide_keyboard")),onInput:t[8]||(t[8]=e=>te())},null,544),[[s.Jo,H.value]]),(0,n.Lk)("button",{type:"button",class:"max_btn",onClick:(0,s.D$)(ae,["prevent"])},(0,l.v_)(e.$t("message.btn_MAX")),1)])]),(0,n.Lk)("div",I,[(0,n.Lk)("div",J,(0,l.v_)(e.$t("message.memo_label")),1),(0,n.Lk)("div",B,[(0,n.bo)((0,n.Lk)("input",{type:"text",class:"input big","onUpdate:modelValue":t[9]||(t[9]=e=>P.value=e),onFocus:t[10]||(t[10]=e=>(0,o.R1)(f).emit("show_keyboard")),onBlur:t[11]||(t[11]=e=>(0,o.R1)(f).emit("hide_keyboard"))},null,544),[[s.Jo,P.value]])])]),Z.value?((0,n.uX)(),(0,n.Wv)(k.A,{key:0,msgAny:z.value,txType:"send"},null,8,["msgAny"])):(0,n.Q3)("",!0),(0,n.Lk)("div",U,[(0,o.R1)(a).networks[(0,o.R1)(a).currentNetwork].currentTxHash?((0,n.uX)(),(0,n.CE)("button",{key:1,class:"btn waiting_btn",onClick:t[13]||(t[13]=(0,s.D$)((e=>(0,o.R1)(f).emit("show_collapsible_notification")),["prevent"]))},[(0,n.Lk)("span",null,(0,l.v_)(e.$t("message.btn_waiting_tx")),1)])):((0,n.uX)(),(0,n.CE)("button",{key:0,class:(0,l.C4)(["btn",{disabled:!(0,o.R1)(a).TxFee.isEnough}]),onClick:t[12]||(t[12]=(0,s.D$)((e=>Y.value=!0),["prevent"]))},[(0,n.Lk)("span",null,(0,l.v_)(e.$t("message.btn_send")),1)],2))])])]),Y.value?((0,n.uX)(),(0,n.Wv)(m.A,{key:0})):(0,n.Q3)("",!0)],64)}}},M=t(71241);const V=(0,M.A)(D,[["__scopeId","data-v-06f422b2"]]);var j=V}}]);
//# sourceMappingURL=743.6dc6e112.js.map