"use strict";(self["webpackChunkcosmos_telegram_signer"]=self["webpackChunkcosmos_telegram_signer"]||[]).push([[10],{89114:function(e,a,l){l.d(a,{A:function(){return v}});var t=l(56768);const n={class:"loader_wrap"},s=(0,t.Lk)("div",{class:"loader"},[(0,t.Lk)("span")],-1),i=[s];function u(e,a){return(0,t.uX)(),(0,t.CE)("div",n,i)}var o=l(71241);const c={},r=(0,o.A)(c,[["render",u]]);var v=r},25010:function(e,a,l){l.r(a),l.d(a,{default:function(){return ae}});l(44114);var t=l(56768),n=l(24232),s=l(45130),i=l(90144),u=l(24113),o=l(81387),c=l(61981),r=l(36571),v=l(63995),d=l(89114);const p=u+"#ic_close",m={class:"modal"},g={class:"modal_content"},k={class:"data"},b=(0,t.Lk)("svg",{class:"icon"},[(0,t.Lk)("use",{"xlink:href":p})],-1),_={class:"modal_title"},h={class:"modal_desc"},w={class:"btns"},L=(0,t.Lk)("div",{class:"overlay"},null,-1);var f={__name:"AuthErrorModal",setup(e){const a=(0,i.KR)(!0);return(0,t.KC)((async()=>{await(0,r.MW)("wallet"),a.value=!1})),(e,a)=>{const l=(0,t.g2)("router-link");return(0,t.uX)(),(0,t.CE)("section",m,[(0,t.Lk)("div",g,[(0,t.Lk)("div",k,[(0,t.bF)(l,{to:"/",class:"close_btn"},{default:(0,t.k6)((()=>[b])),_:1}),(0,t.Lk)("div",_,(0,n.v_)(e.$t("message.auth_error_title")),1),(0,t.Lk)("div",h,(0,n.v_)(e.$t("message.auth_error_desc")),1),(0,t.Lk)("div",w,[(0,t.bF)(l,{to:"/import_wallet",class:"btn"},{default:(0,t.k6)((()=>[(0,t.Lk)("span",null,(0,n.v_)(e.$t("message.btn_import_existing_wallet")),1)])),_:1})])])]),L])}}};const y=f;var C=y;const K=e=>((0,t.Qi)("data-v-6a61c426"),e=e(),(0,t.jt)(),e),R=u+"#ic_biometric_face",A=u+"#ic_biometric_finger",E={class:"page_container careate_pin_page"},$={class:"cont"},x={class:"page_title"},W={class:"page_data_wrap"},X={class:"page_data"},B={class:"label"},T={class:"field"},j={class:"field"},M=["disabled"],I={class:"field"},Q=["disabled"],J={class:"field"},U=["disabled"],V={class:"field"},q=["disabled"],D={class:"field"},F=["disabled"],S={key:0,class:"warning"},z={key:0,class:"icon"},G=K((()=>(0,t.Lk)("use",{"xlink:href":R},null,-1))),P=[G],H={key:1,class:"icon"},N=K((()=>(0,t.Lk)("use",{"xlink:href":A},null,-1))),O=[N];var Y={__name:"AuthPage",setup(e){const a=(0,o.rd)(),l=(0,i.KR)(!0),u=(0,i.KR)(["","","","","",""]),p=(0,i.KR)(""),m=(0,i.KR)(""),g=(0,i.KR)(!1),k=(0,i.KR)(!1),b=(0,i.KR)(!1),_=(0,i.KR)(!1),h=(0,i.KR)("finger"),{isAuthorized:w,authErrorLimit:L}=(0,v.Q)(),f=(0,i.KR)(!1),y=(0,i.KR)(null);function K(e,a){e.target.value.length>=1&&a<6&&e.target.closest(".row").querySelector(`.field:nth-child(${a+1}) input`).focus()}function R(e,a){setTimeout((()=>{0===e.target.value.length&&a>0&&e.target.closest(".row").querySelector(`.field:nth-child(${a}) input`).select()}))}function A(){Telegram.WebApp.isAccessGranted?G():Telegram.WebApp.BiometricManager.requestAccess({reason:"Наш текст"},(()=>G()))}function G(){Telegram.WebApp.BiometricManager.authenticate({reason:"Наш текст"},(e=>{e&&ae(e)}))}(0,t.KC)((async()=>{let e=await(0,r.$k)("wallet",["pin","hmacKey","authErrorLimit","isBiometric"]);p.value=e.pin,m.value=e.hmacKey,k.value=e.authErrorLimit,b.value=e.isBiometric,_.value=Telegram.WebApp.BiometricManager.isBiometricAvailable,"unknown"!=Telegram.WebApp.BiometricManager.biometricType&&(h.value=Telegram.WebApp.BiometricManager.biometricType),l.value=!1,_.value&&b.value&&A()})),(0,t.wB)(u.value,(()=>{u.value[5].length&&document.activeElement.blur(),u.value[5].length&&k.value===L&&Y()}));const N=(0,t.EW)((()=>""!=u.value[5].length));async function Y(){let e=await Z();e?ae():await ee()}async function Z(){let e=await(0,c.mK)(u.value.join(""),m.value);return e===p.value}async function ee(){g.value=!0;let e=k.value-1;k.value=e,e?await(0,r.ys)("wallet",[["userAuthErrorLimit",e]]):f.value=!0,u.value=["","","","","",""],g.value=!1}async function ae(){await(0,r.ys)("wallet",[["authErrorLimit",L]]),w.value=!0,a.push("/account")}async function le(){await(0,r.MW)("wallet"),a.push("/")}return(e,a)=>((0,t.uX)(),(0,t.CE)(t.FK,null,[(0,t.Lk)("section",E,[(0,t.Lk)("div",$,[(0,t.Lk)("div",x,(0,n.v_)(e.$t("message.auth_title")),1),(0,t.Lk)("div",W,[(0,t.Lk)("div",X,[l.value?((0,t.uX)(),(0,t.Wv)(d.A,{key:0})):(0,t.Q3)("",!0),(0,t.Lk)("div",{class:(0,n.C4)(["pin",{show:!l.value}])},[(0,t.Lk)("div",B,(0,n.v_)(e.$t("message.auth_enter_pin_label")),1),(0,t.Lk)("div",{class:(0,n.C4)(["row",{error:g.value}])},[(0,t.Lk)("div",T,[(0,t.bo)((0,t.Lk)("input",{type:"password",class:(0,n.C4)(["input big",{active:u.value[0].length}]),"onUpdate:modelValue":a[0]||(a[0]=e=>u.value[0]=e),maxlength:"1",inputmode:"numeric",ref_key:"inputRef",ref:y,onInput:a[1]||(a[1]=e=>K(e,1)),onKeydown:a[2]||(a[2]=(0,s.jR)((e=>R(e,0)),["backspace"]))},null,34),[[s.Jo,u.value[0]]])]),(0,t.Lk)("div",j,[(0,t.bo)((0,t.Lk)("input",{type:"password",class:(0,n.C4)(["input big",{active:u.value[1].length}]),"onUpdate:modelValue":a[3]||(a[3]=e=>u.value[1]=e),maxlength:"1",inputmode:"numeric",disabled:!u.value[0].length,onInput:a[4]||(a[4]=e=>K(e,2)),onKeydown:a[5]||(a[5]=(0,s.jR)((e=>R(e,1)),["backspace"]))},null,42,M),[[s.Jo,u.value[1]]])]),(0,t.Lk)("div",I,[(0,t.bo)((0,t.Lk)("input",{type:"password",class:(0,n.C4)(["input big",{active:u.value[2].length}]),"onUpdate:modelValue":a[6]||(a[6]=e=>u.value[2]=e),maxlength:"1",inputmode:"numeric",disabled:!u.value[1].length,onInput:a[7]||(a[7]=e=>K(e,3)),onKeydown:a[8]||(a[8]=(0,s.jR)((e=>R(e,2)),["backspace"]))},null,42,Q),[[s.Jo,u.value[2]]])]),(0,t.Lk)("div",J,[(0,t.bo)((0,t.Lk)("input",{type:"password",class:(0,n.C4)(["input big",{active:u.value[3].length}]),"onUpdate:modelValue":a[9]||(a[9]=e=>u.value[3]=e),maxlength:"1",inputmode:"numeric",disabled:!u.value[2].length,onInput:a[10]||(a[10]=e=>K(e,4)),onKeydown:a[11]||(a[11]=(0,s.jR)((e=>R(e,3)),["backspace"]))},null,42,U),[[s.Jo,u.value[3]]])]),(0,t.Lk)("div",V,[(0,t.bo)((0,t.Lk)("input",{type:"password",class:(0,n.C4)(["input big",{active:u.value[4].length}]),"onUpdate:modelValue":a[12]||(a[12]=e=>u.value[4]=e),maxlength:"1",inputmode:"numeric",disabled:!u.value[3].length,onInput:a[13]||(a[13]=e=>K(e,5)),onKeydown:a[14]||(a[14]=(0,s.jR)((e=>R(e,4)),["backspace"]))},null,42,q),[[s.Jo,u.value[4]]])]),(0,t.Lk)("div",D,[(0,t.bo)((0,t.Lk)("input",{type:"password",class:(0,n.C4)(["input big",{active:u.value[5].length}]),"onUpdate:modelValue":a[15]||(a[15]=e=>u.value[5]=e),maxlength:"1",inputmode:"numeric",disabled:!u.value[4].length,onInput:a[16]||(a[16]=e=>K(e,6)),onKeydown:a[17]||(a[17]=(0,s.jR)((e=>R(e,5)),["backspace"]))},null,42,F),[[s.Jo,u.value[5]]])])],2),k.value<(0,i.R1)(L)?((0,t.uX)(),(0,t.CE)("div",S,(0,n.v_)(e.$t("message.auth_error_warning",{count:k.value})),1)):(0,t.Q3)("",!0)],2),_.value&&k.value==(0,i.R1)(L)?((0,t.uX)(),(0,t.CE)("button",{key:1,class:(0,n.C4)(["biometric_btn",{show:!l.value}]),onClick:(0,s.D$)(A,["prevent"])},[(0,t.Lk)("span",null,(0,n.v_)(e.$t("message.btn_biometric2")),1),"face"===h.value?((0,t.uX)(),(0,t.CE)("svg",z,P)):((0,t.uX)(),(0,t.CE)("svg",H,O))],2)):(0,t.Q3)("",!0),(0,t.Lk)("div",{class:(0,n.C4)(["btns",{show:!l.value}])},[k.value<(0,i.R1)(L)?((0,t.uX)(),(0,t.CE)("button",{key:0,class:(0,n.C4)(["btn",{disabled:!N.value}]),onClick:a[18]||(a[18]=(0,s.D$)((e=>Y()),["prevent"]))},[(0,t.Lk)("span",null,(0,n.v_)(e.$t("message.btn_login")),1)],2)):(0,t.Q3)("",!0)],2),(0,t.Lk)("button",{onClick:(0,s.D$)(le,["prevent"]),style:{margin:"20px auto 0",width:"70px"}},"Удалить всё")])])])]),f.value?((0,t.uX)(),(0,t.Wv)(C,{key:0})):(0,t.Q3)("",!0)],64))}},Z=l(71241);const ee=(0,Z.A)(Y,[["__scopeId","data-v-6a61c426"]]);var ae=ee},24113:function(e,a,l){e.exports=l.p+"img/sprite.b89ce33f.svg"}}]);
//# sourceMappingURL=10.aace146e.js.map