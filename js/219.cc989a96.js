"use strict";(self["webpackChunkcosmos_telegram_signer"]=self["webpackChunkcosmos_telegram_signer"]||[]).push([[219],{4047:function(e,a,l){l.r(a),l.d(a,{default:function(){return N}});l(4114);var t=l(6768),s=l(4232),n=l(5130),i=l(4113),u=l(144),o=l(1387),c=l(1981),d=l(6571),r=l(5129),v=l(9114);const p=i+"#ic_close",m={class:"modal"},g={class:"modal_content"},k={class:"data"},b=(0,t.Lk)("svg",{class:"icon"},[(0,t.Lk)("use",{"xlink:href":p})],-1),_={class:"modal_title"},w={class:"modal_desc"},h={class:"btns"},L=(0,t.Lk)("div",{class:"overlay"},null,-1);var y={__name:"AuthErrorModal",setup(e){const a=(0,u.KR)(!0);return(0,t.KC)((async()=>{await(0,d.MW)("wallet"),a.value=!1})),(e,a)=>{const l=(0,t.g2)("router-link");return(0,t.uX)(),(0,t.CE)("section",m,[(0,t.Lk)("div",g,[(0,t.Lk)("div",k,[(0,t.bF)(l,{to:"/",class:"close_btn"},{default:(0,t.k6)((()=>[b])),_:1}),(0,t.Lk)("div",_,(0,s.v_)(e.$t("message.auth_error_title")),1),(0,t.Lk)("div",w,(0,s.v_)(e.$t("message.auth_error_desc")),1),(0,t.Lk)("div",h,[(0,t.bF)(l,{to:"/import_wallet",class:"btn"},{default:(0,t.k6)((()=>[(0,t.Lk)("span",null,(0,s.v_)(e.$t("message.btn_import_existing_wallet")),1)])),_:1})])])]),L])}}};const f=y;var K=f;const R=e=>((0,t.Qi)("data-v-73dcd966"),e=e(),(0,t.jt)(),e),A=i+"#ic_biometric",C={class:"page_container careate_pin_page"},$={class:"cont"},x={class:"page_title"},E={class:"page_data_wrap"},Q={class:"page_data"},j={class:"pin"},W={class:"label"},I={class:"field"},V={class:"field"},X=["disabled"],B={class:"field"},J=["disabled"],M={class:"field"},U=["disabled"],T={class:"field"},F=["disabled"],q={class:"field"},D=["disabled"],S={key:0,class:"warning"},z=R((()=>(0,t.Lk)("svg",{class:"icon"},[(0,t.Lk)("use",{"xlink:href":A})],-1)));var G={__name:"AuthPage",setup(e){const a=(0,o.rd)(),l=(0,u.KR)(!0),i=(0,u.KR)(["","","","","",""]),p=(0,u.KR)(""),m=(0,u.KR)(""),g=(0,u.KR)(!1),k=(0,u.KR)(!1),b=(0,u.KR)(!1),_=(0,u.KR)(!1),{isAuthorized:w}=(0,r.Q)(),h=(0,u.KR)(!1);function L(e,a){e.target.value.length>=1&&a<6&&e.target.closest(".row").querySelector(`.field:nth-child(${a+1}) input`).focus()}function y(e,a){setTimeout((()=>{0===e.target.value.length&&a>0&&e.target.closest(".row").querySelector(`.field:nth-child(${a}) input`).select()}))}function f(){Telegram.WebApp.isAccessGranted?R():Telegram.WebApp.BiometricManager.requestAccess({reason:"Наш текст"},(()=>R()))}function R(){Telegram.WebApp.BiometricManager.authenticate({reason:"Наш текст"},(e=>{e&&A(e)}))}async function A(){await(0,d.ys)("wallet",[["authErrorLimit",3]]),w.value=!0,a.push("/account")}async function G(){await(0,d.MW)("wallet"),a.push("/")}return(0,t.KC)((async()=>{p.value=await(0,d.bQ)("wallet","pin"),m.value=await(0,d.bQ)("wallet","hmacKey"),k.value=await(0,d.bQ)("wallet","authErrorLimit"),_.value=Telegram.WebApp.BiometricManager.isBiometricAvailable,l.value=!1})),(0,t.sV)((async()=>{_.value&&(b.value=await(0,d.bQ)("wallet","isBiometric"),b.value&&f())})),(0,t.wB)(i.value,(async()=>{if(g.value=!1,i.value[5].length){let e=await(0,c.mK)(i.value.join(""),m.value);if(e===p.value)A();else{g.value=!0;let e=k.value-1;k.value=k.value-1,e?await(0,d.ys)("wallet",[["authErrorLimit",e]]):h.value=!0}}})),(e,a)=>((0,t.uX)(),(0,t.CE)(t.FK,null,[(0,t.Lk)("section",C,[(0,t.Lk)("div",$,[(0,t.Lk)("div",x,(0,s.v_)(e.$t("message.auth_title")),1),(0,t.Lk)("div",E,[(0,t.Lk)("div",Q,[l.value?((0,t.uX)(),(0,t.Wv)(v.A,{key:0})):((0,t.uX)(),(0,t.CE)(t.FK,{key:1},[(0,t.Lk)("div",j,[(0,t.Lk)("div",W,(0,s.v_)(e.$t("message.create_pin_create_pin_label")),1),(0,t.Lk)("div",{class:(0,s.C4)(["row",{error:g.value}])},[(0,t.Lk)("div",I,[(0,t.bo)((0,t.Lk)("input",{type:"password",class:"input big","onUpdate:modelValue":a[0]||(a[0]=e=>i.value[0]=e),maxlength:"1",inputmode:"numeric",onInput:a[1]||(a[1]=e=>L(e,1)),onKeydown:a[2]||(a[2]=(0,n.jR)((e=>y(e,0)),["backspace"]))},null,544),[[n.Jo,i.value[0]]])]),(0,t.Lk)("div",V,[(0,t.bo)((0,t.Lk)("input",{type:"password",class:"input big","onUpdate:modelValue":a[3]||(a[3]=e=>i.value[1]=e),maxlength:"1",inputmode:"numeric",disabled:!i.value[0].length,onInput:a[4]||(a[4]=e=>L(e,2)),onKeydown:a[5]||(a[5]=(0,n.jR)((e=>y(e,1)),["backspace"]))},null,40,X),[[n.Jo,i.value[1]]])]),(0,t.Lk)("div",B,[(0,t.bo)((0,t.Lk)("input",{type:"password",class:"input big","onUpdate:modelValue":a[6]||(a[6]=e=>i.value[2]=e),maxlength:"1",inputmode:"numeric",disabled:!i.value[1].length,onInput:a[7]||(a[7]=e=>L(e,3)),onKeydown:a[8]||(a[8]=(0,n.jR)((e=>y(e,2)),["backspace"]))},null,40,J),[[n.Jo,i.value[2]]])]),(0,t.Lk)("div",M,[(0,t.bo)((0,t.Lk)("input",{type:"password",class:"input big","onUpdate:modelValue":a[9]||(a[9]=e=>i.value[3]=e),maxlength:"1",inputmode:"numeric",disabled:!i.value[2].length,onInput:a[10]||(a[10]=e=>L(e,4)),onKeydown:a[11]||(a[11]=(0,n.jR)((e=>y(e,3)),["backspace"]))},null,40,U),[[n.Jo,i.value[3]]])]),(0,t.Lk)("div",T,[(0,t.bo)((0,t.Lk)("input",{type:"password",class:"input big","onUpdate:modelValue":a[12]||(a[12]=e=>i.value[4]=e),maxlength:"1",inputmode:"numeric",disabled:!i.value[3].length,onInput:a[13]||(a[13]=e=>L(e,5)),onKeydown:a[14]||(a[14]=(0,n.jR)((e=>y(e,4)),["backspace"]))},null,40,F),[[n.Jo,i.value[4]]])]),(0,t.Lk)("div",q,[(0,t.bo)((0,t.Lk)("input",{type:"password",class:"input big","onUpdate:modelValue":a[15]||(a[15]=e=>i.value[5]=e),maxlength:"1",inputmode:"numeric",disabled:!i.value[4].length,onInput:a[16]||(a[16]=e=>L(e,6)),onKeydown:a[17]||(a[17]=(0,n.jR)((e=>y(e,5)),["backspace"]))},null,40,D),[[n.Jo,i.value[5]]])])],2),k.value<3?((0,t.uX)(),(0,t.CE)("div",S,(0,s.v_)(e.$t("message.auth_error_warning",{count:k.value})),1)):(0,t.Q3)("",!0)]),_.value?((0,t.uX)(),(0,t.CE)("button",{key:0,class:"biometric_btn",onClick:(0,n.D$)(f,["prevent"])},[(0,t.Lk)("span",null,(0,s.v_)(e.$t("message.btn_biometric2")),1),z])):(0,t.Q3)("",!0),(0,t.Lk)("button",{onClick:(0,n.D$)(G,["prevent"]),style:{padding:"10px","margin-top":"auto"}},"Удалить всё")],64))])])])]),h.value?((0,t.uX)(),(0,t.Wv)(K,{key:0})):(0,t.Q3)("",!0)],64))}},P=l(1241);const H=(0,P.A)(G,[["__scopeId","data-v-73dcd966"]]);var N=H}}]);
//# sourceMappingURL=219.cc989a96.js.map