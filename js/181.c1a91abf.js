"use strict";(self["webpackChunkcosmos_telegram_signer"]=self["webpackChunkcosmos_telegram_signer"]||[]).push([[181],{92732:function(e,t,n){n.d(t,{A:function(){return _}});var a=n(56768),o=n(45130),l=n(24113);const s=e=>((0,a.Qi)("data-v-77f5f7be"),e=e(),(0,a.jt)(),e),u=l+"#ic_scaner",i=s((()=>(0,a.Lk)("svg",{class:"icon"},[(0,a.Lk)("use",{"xlink:href":u})],-1))),r=[i];var c={__name:"QRCode",setup(e){function t(){Telegram.WebApp.showScanQrPopup({text:"Наш текст"})}return(e,n)=>((0,a.uX)(),(0,a.CE)("button",{class:"qr_code_btn",onClick:(0,o.D$)(t,["prevent"])},r))}},d=n(71241);const v=(0,d.A)(c,[["__scopeId","data-v-77f5f7be"]]);var _=v},49441:function(e,t,n){n.r(t),n.d(t,{default:function(){return j}});n(44114);var a=n(56768),o=n(24232),l=n(90144),s=n(45130),u=n(24113),i=n(76750),r=n(81387),c=n(67278),d=n(61981),v=n(89114),_=n(59503),k=n(1955),m=n(92732);const p=e=>((0,a.Qi)("data-v-405f61cc"),e=e(),(0,a.jt)(),e),g=u+"#ic_arrow_hor",b={class:"page_container inner_page_container send"},f={class:"cont"},R={class:"head"},L=p((()=>(0,a.Lk)("svg",{class:"icon"},[(0,a.Lk)("use",{"xlink:href":g})],-1))),y={class:"page_title"},h={class:"token_wrap"},x={class:"token"},w={class:"logo"},A=["src","alt"],C={class:"denom"},$={class:"amount"},F={class:"val"},S={class:"cost"},N={class:"address"},T={class:"field_label"},W={class:"field"},K={class:"amount_field"},Q={class:"field_label"},X={class:"cost"},E={class:"field"},J={class:"memo_field"},I={class:"field_label"},U={class:"field"},D={class:"btns"};var q={__name:"Send",setup(e){const t=(0,i.o)(),n=(0,r.rd)(),u=(0,r.lq)(),p=(0,a.WQ)("emitter"),g=(0,a.WQ)("i18n"),q=(0,c.hN)(),B=t.balances.find((e=>e.denom===u.query.denom)),M=(0,l.KR)(""),j=(0,l.KR)(""),V=(0,l.KR)(""),Y=(0,l.KR)(!1),z=(0,l.KR)([]),H=(0,l.KR)(!1),P=(0,l.KR)(!1),G=(0,l.KR)((0,a.EW)((()=>P.value&&M.value.length)));function O(e){let t=M.value.startsWith(B.chain_info.bech32_prefix);t?e.target.classList.remove("error"):e.target.classList.add("error")}function Z(){P.value=!1,setTimeout((()=>{j.value=(0,d.NJ)(B.amount,B.exponent),P.value=!0}))}function ee(e){P.value=!1,setTimeout((()=>{e.target.value.length&&e.target.value<=0&&(j.value=""),e.target.value.length&&e.target.value>0&&e.target.value<(0,d.NJ)(B.amount,B.exponent)&&(P.value=!0),e.target.value>(0,d.NJ)(B.amount,B.exponent)&&Z()}))}async function te(){H.value=!0;try{t.TxFee.isRemember&&await t.updateTxFeeInfo();let e=await(0,d.qS)(z.value,V.value);q.notify({group:"default",clean:!0}),q.notify({group:"default",speed:200,duration:-100,title:g.global.t("message.notification_tx_pending_title"),type:"pending",data:{explorer_link:(0,d.aS)(t.currentNetwork)}}),(0,d.nw)(e),n.push("/account")}catch(e){console.log(e),ne(e)}}function ne(e){let t="";t=e.code?g.global.t(`message.notification_tx_error_${e.code}`):g.global.t("message.notification_tx_error_rejected"),q.notify({group:"default",speed:200,duration:6e3,title:"Tx error",text:t,type:"error"})}return(0,a.wB)((0,a.EW)((()=>G.value)),(()=>{G.value&&(z.value=[{typeUrl:"/cosmos.bank.v1beta1.MsgSend",value:{fromAddress:t.currentAddress,toAddress:M.value,amount:[{denom:B.denom,amount:""+parseFloat(j.value.toString().replace(",",".")).toFixed(B.exponent)*Math.pow(10,B.exponent)}]}}])})),p.on("auth",(()=>{Y.value=!1,te()})),p.on("close_sign_tx_modal",(()=>{Y.value=!1})),(e,n)=>{const u=(0,a.g2)("router-link");return(0,a.uX)(),(0,a.CE)(a.FK,null,[(0,a.Lk)("section",b,[H.value?((0,a.uX)(),(0,a.Wv)(v.A,{key:0})):(0,a.Q3)("",!0),(0,a.Lk)("div",f,[(0,a.Lk)("div",R,[(0,a.bF)(u,{to:"/account",class:"back_btn"},{default:(0,a.k6)((()=>[L])),_:1}),(0,a.Lk)("div",y,(0,o.v_)(e.$t("message.send_page_title")),1)]),(0,a.Lk)("div",h,[(0,a.Lk)("div",x,[(0,a.Lk)("div",w,[(0,a.Lk)("img",{src:(0,l.R1)(B).token_info.logo_URIs.svg,alt:(0,l.R1)(B).token_info.name,loading:"lazy"},null,8,A)]),(0,a.Lk)("div",C,(0,o.v_)((0,l.R1)(B).token_info.symbol),1),(0,a.Lk)("div",$,[(0,a.Lk)("div",F,(0,o.v_)((0,l.R1)(d.NJ)((0,l.R1)(B).amount,(0,l.R1)(B).exponent).toLocaleString("ru-RU",{maximumFractionDigits:7})),1),(0,a.Lk)("div",S,(0,o.v_)((0,l.R1)(d.ST)((0,l.R1)(d.Y$)((0,l.R1)(B).token_info.symbol,(0,l.R1)(B).amount,(0,l.R1)(B).exponent)))+" "+(0,o.v_)((0,l.R1)(t).currentCurrencySymbol),1)])])]),(0,a.Lk)("div",N,[(0,a.Lk)("div",T,(0,o.v_)(e.$t("message.send_address_label")),1),(0,a.Lk)("div",W,[(0,a.bo)((0,a.Lk)("input",{type:"text",class:"input big","onUpdate:modelValue":n[0]||(n[0]=e=>M.value=e),onFocus:n[1]||(n[1]=e=>(0,l.R1)(p).emit("show_keyboard")),onBlur:n[2]||(n[2]=e=>(0,l.R1)(p).emit("hide_keyboard")),onInput:n[3]||(n[3]=e=>O(e))},null,544),[[s.Jo,M.value]]),(0,a.bF)(m.A,{class:"in_field"})])]),(0,a.Lk)("div",K,[(0,a.Lk)("div",Q,[(0,a.eW)((0,o.v_)(e.$t("message.send_amount_label"))+" ",1),(0,a.Lk)("div",X,(0,o.v_)((0,l.R1)(d.ST)((0,l.R1)(d.Y$)((0,l.R1)(t).networks[(0,l.R1)(t).currentNetwork].token_name,j.value*Math.pow(10,(0,l.R1)(t).networks[(0,l.R1)(t).currentNetwork].exponent),(0,l.R1)(t).networks[(0,l.R1)(t).currentNetwork].exponent)))+" "+(0,o.v_)((0,l.R1)(t).currentCurrencySymbol),1)]),(0,a.Lk)("div",E,[(0,a.bo)((0,a.Lk)("input",{type:"number",inputmode:"numeric",class:"input big","onUpdate:modelValue":n[4]||(n[4]=e=>j.value=e),placeholder:"0.00",onFocus:n[5]||(n[5]=e=>(0,l.R1)(p).emit("show_keyboard")),onBlur:n[6]||(n[6]=e=>(0,l.R1)(p).emit("hide_keyboard")),onInput:n[7]||(n[7]=e=>ee(e))},null,544),[[s.Jo,j.value]]),(0,a.Lk)("button",{type:"button",class:"max_btn",onClick:(0,s.D$)(Z,["prevent"])},(0,o.v_)(e.$t("message.btn_MAX")),1)])]),(0,a.Lk)("div",J,[(0,a.Lk)("div",I,(0,o.v_)(e.$t("message.memo_label")),1),(0,a.Lk)("div",U,[(0,a.bo)((0,a.Lk)("input",{type:"text",class:"input big","onUpdate:modelValue":n[8]||(n[8]=e=>V.value=e),onFocus:n[9]||(n[9]=e=>(0,l.R1)(p).emit("show_keyboard")),onBlur:n[10]||(n[10]=e=>(0,l.R1)(p).emit("hide_keyboard"))},null,544),[[s.Jo,V.value]])])]),G.value?((0,a.uX)(),(0,a.Wv)(_.A,{key:0,msgAny:z.value},null,8,["msgAny"])):(0,a.Q3)("",!0),(0,a.Lk)("div",D,[(0,l.R1)(t).networks[(0,l.R1)(t).currentNetwork].currentTxHash?((0,a.uX)(),(0,a.CE)("button",{key:1,class:"btn waiting_btn",onClick:n[12]||(n[12]=(0,s.D$)((e=>(0,l.R1)(p).emit("show_pending_notification")),["prevent"]))},[(0,a.Lk)("span",null,(0,o.v_)(e.$t("message.btn_waiting_tx")),1)])):((0,a.uX)(),(0,a.CE)("button",{key:0,class:(0,o.C4)(["btn",{disabled:!(0,l.R1)(t).TxFee.isEnough}]),onClick:n[11]||(n[11]=(0,s.D$)((e=>Y.value=!0),["prevent"]))},[(0,a.Lk)("span",null,(0,o.v_)(e.$t("message.btn_send")),1)],2))])])]),Y.value?((0,a.uX)(),(0,a.Wv)(k.A,{key:0})):(0,a.Q3)("",!0)],64)}}},B=n(71241);const M=(0,B.A)(q,[["__scopeId","data-v-405f61cc"]]);var j=M}}]);
//# sourceMappingURL=181.c1a91abf.js.map