"use strict";(self["webpackChunkcosmos_telegram_signer"]=self["webpackChunkcosmos_telegram_signer"]||[]).push([[526],{92732:function(e,t,n){n.d(t,{A:function(){return _}});var a=n(56768),o=n(45130),l=n(24113);const s=e=>((0,a.Qi)("data-v-77f5f7be"),e=e(),(0,a.jt)(),e),r=l+"#ic_scaner",u=s((()=>(0,a.Lk)("svg",{class:"icon"},[(0,a.Lk)("use",{"xlink:href":r})],-1))),i=[u];var c={__name:"QRCode",setup(e){function t(){Telegram.WebApp.showScanQrPopup({text:"Наш текст"})}return(e,n)=>((0,a.uX)(),(0,a.CE)("button",{class:"qr_code_btn",onClick:(0,o.D$)(t,["prevent"])},i))}},d=n(71241);const v=(0,d.A)(c,[["__scopeId","data-v-77f5f7be"]]);var _=v},58265:function(e,t,n){n.r(t),n.d(t,{default:function(){return V}});n(44114);var a=n(56768),o=n(24232),l=n(90144),s=n(45130),r=n(24113),u=n(76750),i=n(81387),c=n(67278),d=n(89354),v=n(61981),_=n(89114),k=n(67593),m=n(1955),p=n(92732);const g=e=>((0,a.Qi)("data-v-0f906664"),e=e(),(0,a.jt)(),e),f=r+"#ic_arrow_hor",b={class:"page_container inner_page_container send"},R={class:"cont"},L={class:"head"},h=g((()=>(0,a.Lk)("svg",{class:"icon"},[(0,a.Lk)("use",{"xlink:href":f})],-1))),y={class:"page_title"},x={class:"token_wrap"},w={class:"token"},A={class:"logo"},C=["src","alt"],$={class:"denom"},F={class:"amount"},N={class:"val"},S={class:"cost"},T={class:"address"},K={class:"field_label"},Q={class:"field"},W={class:"amount_field"},X={class:"field_label"},E={class:"cost"},J={class:"field"},I={class:"memo_field"},U={class:"field_label"},B={class:"field"},D={class:"btns"};var q={__name:"Send",setup(e){const t=(0,u.o)(),n=(0,i.rd)(),r=(0,i.lq)(),g=(0,a.WQ)("emitter"),f=(0,a.WQ)("i18n"),q=(0,c.hN)(),M=t.balances.find((e=>e.denom===r.query.denom)),j=(0,l.KR)(""),V=(0,l.KR)(""),P=(0,l.KR)(""),Y=(0,l.KR)(!1),z=(0,l.KR)([]),H=(0,l.KR)(!1),G=(0,l.KR)(!1),O=(0,l.KR)((0,a.EW)((()=>G.value&&j.value.length)));function Z(e){try{let{prefix:n,data:a}=(0,d.fromBech32)(j.value);n==M.chain_info.bech32_prefix&&a.length==t.networks[t.currentNetwork].address_length&&e.target.classList.remove("error")}catch(n){return e.target.classList.add("error"),!1}}function ee(){G.value=!1,setTimeout((()=>{V.value=(0,v.NJ)(M.amount,M.exponent),G.value=!0}))}function te(e){G.value=!1,setTimeout((()=>{e.target.value.length&&e.target.value<=0&&(V.value=""),e.target.value.length&&e.target.value>0&&e.target.value<(0,v.NJ)(M.amount,M.exponent)&&(G.value=!0),e.target.value>(0,v.NJ)(M.amount,M.exponent)&&ee()}))}async function ne(){H.value=!0;try{t.TxFee.isRemember&&await t.updateTxFeeInfo();let e=await(0,v.qS)(z.value,P.value);q.notify({group:"default",clean:!0}),q.notify({group:"default",speed:200,duration:-100,title:f.global.t("message.notification_tx_pending_title"),type:"pending",data:{explorer_link:(0,v.aS)(t.currentNetwork)}}),(0,v.nw)(e),n.push("/account")}catch(e){console.log(e),ae(e)}}function ae(e){let t="";t=e.code?f.global.t(`message.notification_tx_error_${e.code}`):f.global.t("message.notification_tx_error_rejected"),q.notify({group:"default",speed:200,duration:6e3,title:"Tx error",text:t,type:"error"})}return(0,a.wB)((0,a.EW)((()=>O.value)),(()=>{O.value&&(z.value=[{typeUrl:"/cosmos.bank.v1beta1.MsgSend",value:{fromAddress:t.currentAddress,toAddress:j.value,amount:[{denom:M.denom,amount:""+parseFloat(V.value.toString().replace(",",".")).toFixed(M.exponent)*Math.pow(10,M.exponent)}]}}])})),(0,a.hi)((()=>{g.off("auth"),g.off("close_sign_tx_modal")})),g.on("auth",(()=>{Y.value=!1,ne()})),g.on("close_sign_tx_modal",(()=>{Y.value=!1})),(e,n)=>{const r=(0,a.g2)("router-link");return(0,a.uX)(),(0,a.CE)(a.FK,null,[(0,a.Lk)("section",b,[H.value?((0,a.uX)(),(0,a.Wv)(_.A,{key:0})):(0,a.Q3)("",!0),(0,a.Lk)("div",R,[(0,a.Lk)("div",L,[(0,a.bF)(r,{to:"/account",class:"back_btn"},{default:(0,a.k6)((()=>[h])),_:1}),(0,a.Lk)("div",y,(0,o.v_)(e.$t("message.send_page_title")),1)]),(0,a.Lk)("div",x,[(0,a.Lk)("div",w,[(0,a.Lk)("div",A,[(0,a.Lk)("img",{src:(0,l.R1)(M).token_info.logo_URIs.svg,alt:(0,l.R1)(M).token_info.name,loading:"lazy"},null,8,C)]),(0,a.Lk)("div",$,(0,o.v_)((0,l.R1)(M).token_info.symbol),1),(0,a.Lk)("div",F,[(0,a.Lk)("div",N,(0,o.v_)((0,l.R1)(v.NJ)((0,l.R1)(M).amount,(0,l.R1)(M).exponent).toLocaleString("ru-RU",{maximumFractionDigits:7}).replace(",",".")),1),(0,a.Lk)("div",S,(0,o.v_)((0,l.R1)(v.ST)((0,l.R1)(v.Y$)((0,l.R1)(M).token_info.symbol,(0,l.R1)(M).amount,(0,l.R1)(M).exponent)))+" "+(0,o.v_)((0,l.R1)(t).currentCurrencySymbol),1)])])]),(0,a.Lk)("div",T,[(0,a.Lk)("div",K,(0,o.v_)(e.$t("message.send_address_label")),1),(0,a.Lk)("div",Q,[(0,a.bo)((0,a.Lk)("input",{type:"text",class:"input big","onUpdate:modelValue":n[0]||(n[0]=e=>j.value=e),onFocus:n[1]||(n[1]=e=>(0,l.R1)(g).emit("show_keyboard")),onBlur:n[2]||(n[2]=e=>(0,l.R1)(g).emit("hide_keyboard")),onInput:n[3]||(n[3]=e=>Z(e)),onPaste:n[4]||(n[4]=e=>Z(e))},null,544),[[s.Jo,j.value]]),(0,a.bF)(p.A,{class:"in_field"})])]),(0,a.Lk)("div",W,[(0,a.Lk)("div",X,[(0,a.eW)((0,o.v_)(e.$t("message.send_amount_label"))+" ",1),(0,a.Lk)("div",E,(0,o.v_)((0,l.R1)(v.ST)((0,l.R1)(v.Y$)((0,l.R1)(t).networks[(0,l.R1)(t).currentNetwork].token_name,V.value*Math.pow(10,(0,l.R1)(t).networks[(0,l.R1)(t).currentNetwork].exponent),(0,l.R1)(t).networks[(0,l.R1)(t).currentNetwork].exponent)))+" "+(0,o.v_)((0,l.R1)(t).currentCurrencySymbol),1)]),(0,a.Lk)("div",J,[(0,a.bo)((0,a.Lk)("input",{type:"number",inputmode:"numeric",class:"input big","onUpdate:modelValue":n[5]||(n[5]=e=>V.value=e),placeholder:"0.00",onFocus:n[6]||(n[6]=e=>(0,l.R1)(g).emit("show_keyboard")),onBlur:n[7]||(n[7]=e=>(0,l.R1)(g).emit("hide_keyboard")),onInput:n[8]||(n[8]=e=>te(e))},null,544),[[s.Jo,V.value]]),(0,a.Lk)("button",{type:"button",class:"max_btn",onClick:(0,s.D$)(ee,["prevent"])},(0,o.v_)(e.$t("message.btn_MAX")),1)])]),(0,a.Lk)("div",I,[(0,a.Lk)("div",U,(0,o.v_)(e.$t("message.memo_label")),1),(0,a.Lk)("div",B,[(0,a.bo)((0,a.Lk)("input",{type:"text",class:"input big","onUpdate:modelValue":n[9]||(n[9]=e=>P.value=e),onFocus:n[10]||(n[10]=e=>(0,l.R1)(g).emit("show_keyboard")),onBlur:n[11]||(n[11]=e=>(0,l.R1)(g).emit("hide_keyboard"))},null,544),[[s.Jo,P.value]])])]),O.value?((0,a.uX)(),(0,a.Wv)(k.A,{key:0,msgAny:z.value},null,8,["msgAny"])):(0,a.Q3)("",!0),(0,a.Lk)("div",D,[(0,l.R1)(t).networks[(0,l.R1)(t).currentNetwork].currentTxHash?((0,a.uX)(),(0,a.CE)("button",{key:1,class:"btn waiting_btn",onClick:n[13]||(n[13]=(0,s.D$)((e=>(0,l.R1)(g).emit("show_pending_notification")),["prevent"]))},[(0,a.Lk)("span",null,(0,o.v_)(e.$t("message.btn_waiting_tx")),1)])):((0,a.uX)(),(0,a.CE)("button",{key:0,class:(0,o.C4)(["btn",{disabled:!(0,l.R1)(t).TxFee.isEnough}]),onClick:n[12]||(n[12]=(0,s.D$)((e=>Y.value=!0),["prevent"]))},[(0,a.Lk)("span",null,(0,o.v_)(e.$t("message.btn_send")),1)],2))])])]),Y.value?((0,a.uX)(),(0,a.Wv)(m.A,{key:0})):(0,a.Q3)("",!0)],64)}}},M=n(71241);const j=(0,M.A)(q,[["__scopeId","data-v-0f906664"]]);var V=j}}]);
//# sourceMappingURL=526.61698a43.js.map