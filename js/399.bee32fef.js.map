{"version":3,"file":"js/399.bee32fef.js","mappings":"wdAuCI,MAAMA,GAAQC,EAAAA,EAAAA,kBACVC,GAASC,EAAAA,EAAAA,MACTC,GAAUC,EAAAA,EAAAA,IAAO,WACjBC,GAAUC,EAAAA,EAAAA,KAAI,GACdC,EAAUC,iB,OAGdC,EAAAA,EAAAA,KAAUC,UAEN,IAAIC,QAAeC,EAAAA,EAAAA,IAAkB,SAAU,CAAC,oBAAqB,kBAEjE,IAAIC,KAAS,IAAIA,KAAKF,EAAOG,eAAiBf,EAAMgB,SAEpDZ,EAAQa,KAAK,SAET,IAAIH,KAAKF,EAAOM,mBAAqB,IAAIJ,KAASd,EAAMmB,oBAElDnB,EAAMoB,gBAIhBd,EAAQe,OAAQ,EACpB,KAIJC,EAAAA,EAAAA,KAAY,KAERlB,EAAQmB,IAAI,OAAO,IAKvBnB,EAAQoB,GAAG,QAAQb,gBAETX,EAAMyB,OAGZnB,EAAQe,OAAQ,EAGhBnB,EAAOwB,KAAK,WAAW,I,iSC1E/B,MAAMC,GAA2B,OAAgB,EAAQ,CAAC,CAAC,YAAY,qBAEvE,O","sources":["webpack://cosmos-telegram-signer/./src/views/AuthPage.vue","webpack://cosmos-telegram-signer/./src/views/AuthPage.vue?a80b"],"sourcesContent":["<template>\n    <!-- Auth page -->\n    <section class=\"page_container auth_page\">\n        <div class=\"cont\">\n            <!-- Auth page title -->\n            <div class=\"page_title\">\n                {{ $t('message.auth_title') }}\n            </div>\n\n            <!-- Auth page data -->\n            <div class=\"page_data_wrap\">\n                <div class=\"page_data\">\n                    <!-- Loader -->\n                    <Loader v-if=\"loading\" />\n\n                    <!-- Auth -->\n                    <Auth />\n\n                    <div class=\"version\">\n                        {{ version }}\n                    </div>\n                </div>\n            </div>\n        </div>\n    </section>\n</template>\n\n\n<script setup>\n    import { ref, inject, onUnmounted, onMounted } from 'vue'\n    import { useGlobalStore } from '@/store'\n    import { useRouter } from 'vue-router'\n    import { DBgetMultipleData } from '@/utils/db'\n\n    // Components\n    import Auth from '@/components/Auth.vue'\n    import Loader from '@/components/Loader.vue'\n\n\n    const store = useGlobalStore(),\n        router = useRouter(),\n        emitter = inject('emitter'),\n        loading = ref(true),\n        version = process.env.APP_VERSION || 'unknown'\n\n\n    onMounted(async () => {\n        // Get data from DB\n        let DBData = await DBgetMultipleData('global', ['userLockTimestamp', 'authTimestamp'])\n\n        if (new Date() - new Date(DBData.authTimestamp) < store.authTime) {\n            // Auto auth\n            emitter.emit('auth')\n        } else {\n            if (new Date(DBData.userLockTimestamp) - new Date() < store.userLockTime) {\n                // Set user unlock\n                await store.setUserUnlock()\n            }\n\n            // Hide loader\n            loading.value = false\n        }\n    })\n\n\n    onUnmounted(() => {\n        // Unlisten events\n        emitter.off('auth')\n    })\n\n\n    // Event \"auth\"\n    emitter.on('auth', async () => {\n        // Auth\n        await store.auth()\n\n        // Hide loader\n        loading.value = false\n\n        // Redirect\n        router.push('/account')\n    })\n</script>\n\n\n<style scoped>\n    .btns\n    {\n        margin-top: 0;\n    }\n\n\n    .version\n    {\n        font-size: 10px;\n\n        margin-top: 12px;\n\n        text-align: center;\n\n        opacity: .5;\n    }\n</style>","import script from \"./AuthPage.vue?vue&type=script&setup=true&lang=js\"\nexport * from \"./AuthPage.vue?vue&type=script&setup=true&lang=js\"\n\nimport \"./AuthPage.vue?vue&type=style&index=0&id=746f114c&scoped=true&lang=css\"\n\nimport exportComponent from \"../../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['__scopeId',\"data-v-746f114c\"]])\n\nexport default __exports__"],"names":["store","useGlobalStore","router","useRouter","emitter","inject","loading","ref","version","process","onMounted","async","DBData","DBgetMultipleData","Date","authTimestamp","authTime","emit","userLockTimestamp","userLockTime","setUserUnlock","value","onUnmounted","off","on","auth","push","__exports__"],"sourceRoot":""}