"use strict";(self["webpackChunkcosmos_telegram_signer"]=self["webpackChunkcosmos_telegram_signer"]||[]).push([[518],{91901:function(e,a,n){n.d(a,{A:function(){return m}});var t=n(56768),l=n(45130),o=n(24113),s=n(90144);const r=o+"#ic_arrow_hor",u=o+"#ic_search",c=o+"#ic_close",i={class:"search"},v={class:"field"},d=["placeholder"];var k={__name:"Search",props:["source"],setup(e){const a=e,n=(0,t.WQ)("emitter"),o=(0,s.KR)("");function k(){setTimeout((()=>n.emit("search_focus")),100)}function _(){setTimeout((()=>n.emit("search_blur")),100)}function p(){n.emit("search",{query:o.value,source:a.source})}function m(){o.value="",n.emit("search",{query:o.value,source:a.source})}return(e,a)=>((0,t.uX)(),(0,t.CE)("div",i,[(0,t.Lk)("button",{class:"back_btn",onClick:(0,l.D$)(_,["prevent"])},a[2]||(a[2]=[(0,t.Lk)("span",null,[(0,t.Lk)("svg",null,[(0,t.Lk)("use",{"xlink:href":r})])],-1)])),(0,t.Lk)("div",v,[a[4]||(a[4]=(0,t.Lk)("svg",{class:"icon"},[(0,t.Lk)("use",{"xlink:href":u})],-1)),(0,t.bo)((0,t.Lk)("input",{type:"text","onUpdate:modelValue":a[0]||(a[0]=e=>o.value=e),class:"input",placeholder:e.$t("message.search_placeholder"),onFocus:k,onBlur:_,onInput:p},null,40,d),[[l.Jo,o.value]]),o.value.length?((0,t.uX)(),(0,t.CE)("button",{key:0,class:"clear_btn",onClick:a[1]||(a[1]=(0,l.D$)((e=>m()),["prevent"]))},a[3]||(a[3]=[(0,t.Lk)("svg",null,[(0,t.Lk)("use",{"xlink:href":c})],-1)]))):(0,t.Q3)("",!0)])]))}},_=n(71241);const p=(0,_.A)(k,[["__scopeId","data-v-aba77f5c"]]);var m=p},39167:function(e,a,n){n.d(a,{A:function(){return W}});n(44114);var t=n(56768),l=n(90144),o=n(24232),s=n(96011),r=n(90405),u=n(17086),c=n(91901),i=n(24113);const v=i+"#ic_check",d={class:"token"},k={class:"logo"},_=["src"],p={key:0,class:"check"},m={class:"denom"},b={class:"amount"},g={class:"val"},f={class:"cost"};var y={__name:"AvailableTokensItem",props:{balance:{type:Object,default:()=>({})},currentToken:{type:Object,default:()=>({denom:""})}},setup(e){const a=e,n=(0,s.o)();function u(e){return e===a.currentToken.denom}return(e,s)=>{const c=(0,t.g2)("router-link");return(0,t.uX)(),(0,t.Wv)(c,{to:`/account/send?denom=${a.balance.denom}`,class:(0,o.C4)(["token_wrap",{current:u(a.balance.denom)}])},{default:(0,t.k6)((()=>[(0,t.Lk)("div",d,[(0,t.Lk)("div",k,[(0,t.Lk)("img",{src:a.balance.token_info.logo_URIs.svg,alt:"",loading:"lazy"},null,8,_),u(a.balance.denom)?((0,t.uX)(),(0,t.CE)("div",p,s[0]||(s[0]=[(0,t.Lk)("svg",null,[(0,t.Lk)("use",{"xlink:href":v})],-1)]))):(0,t.Q3)("",!0)]),(0,t.Lk)("div",m,(0,o.v_)(a.balance.token_info.symbol),1),(0,t.Lk)("div",b,[(0,t.Lk)("div",g,(0,o.v_)((0,l.R1)(r.NJ)(a.balance.amount,a.balance.exponent).toLocaleString("ru-RU",{maximumFractionDigits:7}).replace(",",".")),1),(0,t.Lk)("div",f,(0,o.v_)((0,l.R1)(r.ST)((0,l.R1)(r.Y$)(a.balance.token_info.symbol,a.balance.amount,a.balance.exponent)))+" "+(0,o.v_)((0,l.R1)(n).currentCurrencySymbol),1)])])])),_:1},8,["to","class"])}}},L=n(71241);const h=(0,L.A)(y,[["__scopeId","data-v-2a50009b"]]);var R=h;const x={class:"available_tokens"},w={class:"cont"},C={key:1,class:"tokens"},T={key:0,class:"count"},$={key:1,class:"list"},A={key:2,class:"empty"};var E={__name:"AvailableTokens",props:["currentToken"],setup(e){const a=e,n=(0,s.o)(),i=(0,t.WQ)("emitter"),v=(0,l.KR)([]);return(0,t.KC)((()=>{n.isBalancesGot&&(v.value=n.balances)})),(0,t.wB)((0,t.EW)((()=>n.isBalancesGot)),(()=>{n.isBalancesGot&&(v.value=n.balances)})),i.on("search",(({query:e,source:a})=>{if("availables"===a){v.value=[];for(let a in n.balances)n.balances[a].token_info.symbol.toLocaleLowerCase().includes(e.toLocaleLowerCase())&&v.value.push(n.balances[a])}})),(e,s)=>((0,t.uX)(),(0,t.CE)("section",x,[(0,t.Lk)("div",w,[(0,t.bF)(c.A,{source:"availables"}),(0,l.R1)(n).isInitialized&&(0,l.R1)(n).isBalancesGot?((0,t.uX)(),(0,t.CE)("div",C,[v.value.length===(0,l.R1)(n).balances.length?((0,t.uX)(),(0,t.CE)("div",T,[(0,t.Lk)("b",null,(0,o.v_)((0,l.R1)(n).balances.length),1),(0,t.eW)(" "+(0,o.v_)(e.$t("message.available_tokens_title")),1)])):(0,t.Q3)("",!0),v.value.length?((0,t.uX)(),(0,t.CE)("div",$,[((0,t.uX)(!0),(0,t.CE)(t.FK,null,(0,t.pI)(v.value,((e,n)=>((0,t.uX)(),(0,t.CE)("div",{class:"item",key:n,style:(0,o.Tr)(`order: ${parseInt(-1e6*(0,l.R1)(r.Y$)(e.token_info.symbol,e.amount,e.exponent))};`)},[(0,t.bF)(R,{balance:e,currentToken:a.currentToken},null,8,["balance","currentToken"])],4)))),128))])):((0,t.uX)(),(0,t.CE)("div",A,(0,o.v_)(e.$t("message.search_empty")),1))])):((0,t.uX)(),(0,t.Wv)(u.A,{key:0}))])]))}};const X=(0,L.A)(E,[["__scopeId","data-v-96d84aba"]]);var W=X},46964:function(e,a,n){n.d(a,{A:function(){return i}});var t=n(56768),l=n(45130),o=n(24113);const s=o+"#ic_scaner";var r={__name:"QRCodeScanner",setup(e){function a(){Telegram.WebApp.showScanQrPopup({text:""})}return(e,n)=>((0,t.uX)(),(0,t.CE)("button",{class:"btn",onClick:n[0]||(n[0]=(0,l.D$)((e=>a()),["prevent"]))},n[1]||(n[1]=[(0,t.Lk)("svg",{class:"icon"},[(0,t.Lk)("use",{"xlink:href":s})],-1)])))}},u=n(71241);const c=(0,u.A)(r,[["__scopeId","data-v-1412c06e"]]);var i=c},41518:function(e,a,n){n.r(a),n.d(a,{default:function(){return re}});n(44114);var t=n(56768),l=n(24232),o=n(45130),s=n(90144),r=n(24113),u=n(96011),c=n(81387),i=n(67278),v=n(89354),d=n(90405),k=n(17086),_=n(39167);const p=r+"#ic_arrow_hor",m={class:"page_container inner_page_container tokens_page"},b={class:"cont"},g={class:"head"},f={class:"page_title"};var y={__name:"TokensModal",props:["currentToken"],setup(e){const a=e,n=(0,t.WQ)("emitter");return(e,o)=>((0,t.uX)(),(0,t.CE)("section",m,[(0,t.Lk)("div",b,[(0,t.Lk)("div",g,[(0,t.Lk)("button",{class:"back_btn",onClick:o[0]||(o[0]=e=>(0,s.R1)(n).emit("close_tokens_modal"))},o[1]||(o[1]=[(0,t.Lk)("svg",{class:"icon"},[(0,t.Lk)("use",{"xlink:href":p})],-1)])),(0,t.Lk)("div",f,(0,l.v_)(e.$t("message.tokens_page_title")),1)]),(0,t.bF)(_.A,{class:"inside_modal",currentToken:a.currentToken},null,8,["currentToken"])])]))}},L=n(71241);const h=(0,L.A)(y,[["__scopeId","data-v-76033aec"]]);var R=h,x=n(50358),w=n(86255),C=n(46964);const T=r+"#ic_arrow_hor",$={class:"page_container inner_page_container send"},A={class:"cont"},E={class:"head"},X={class:"page_title"},W={class:"token"},F={class:"logo"},N=["src"],I={class:"denom"},K={class:"amount"},S={class:"val"},q={class:"cost"},B={class:"token"},Q={class:"logo"},D=["src"],J={class:"denom"},M={class:"amount"},U={class:"cost"},O={class:"address"},V={class:"field_label"},G={class:"field"},Y=["placeholder"],j={class:"amount_field"},z={class:"field_label"},H={class:"cost"},P={class:"field"},Z=["placeholder"],ee={class:"memo_field"},ae={class:"field_label"},ne={class:"field"},te=["placeholder"],le={class:"btns"};var oe={__name:"Send",setup(e){const a=(0,u.o)(),n=(0,c.rd)(),r=(0,c.lq)(),_=(0,t.WQ)("emitter"),p=(0,t.WQ)("i18n"),m=(0,i.hN)(),b=(0,s.KR)(a.balances.find((e=>e.denom===r.query.denom))),g=(0,s.KR)(null),f=(0,s.KR)(r.query.address||""),y=(0,s.KR)(r.query.amount||""),L=(0,s.KR)(""),h=(0,s.KR)(!1),oe=(0,s.KR)(!1),se=(0,s.KR)([]),re=(0,s.KR)(!1),ue=(0,s.KR)(!1),ce=(0,s.KR)(!1),ie=(0,s.KR)((0,t.EW)((()=>ue.value&&ce.value)));function ve(){f.value="",y.value="",L.value="",re.value=!1,ue.value=!1,ce.value=!1,g.value.classList.remove("error"),b.value=a.balances.find((e=>e.denom===r.query.denom)),r.query.address&&(f.value=r.query.address,de()),_.emit("close_any_modal")}function de(){try{let{prefix:e,data:n}=(0,v.fromBech32)(f.value);e==a.networks[a.currentNetwork].prefix&&n.length==a.networks[a.currentNetwork].address_length?(g.value.classList.remove("error"),ce.value=!0):(g.value.classList.add("error"),ce.value=!1)}catch(e){g.value.classList.add("error"),ce.value=!1}}function ke(){ue.value=!1,setTimeout((()=>{y.value=(0,d.NJ)(b.value.amount,b.value.exponent),ue.value=!0}))}function _e(){ue.value=!1,setTimeout((()=>{y.value.length&&y.value<=0&&(y.value=""),y.value&&y.value>0&&y.value<(0,d.NJ)(b.value.amount,b.value.exponent)&&(ue.value=!0),y.value>(0,d.NJ)(b.value.amount,b.value.exponent)&&ke()}))}function pe(){navigator.clipboard.readText().then((e=>{try{let{prefix:n,data:t}=(0,v.fromBech32)(e);n==a.networks[a.currentNetwork].prefix&&t.length==a.networks[a.currentNetwork].address_length?f.value=e:m.notify({group:"default",speed:200,duration:1e3,title:p.global.t("message.notification_tx_error_title"),text:p.global.t("message.notification_error_invalid_paste_title"),type:"error"})}catch(n){m.notify({group:"default",speed:200,duration:1e3,title:p.global.t("message.notification_tx_error_title"),text:p.global.t("message.notification_error_invalid_paste_title"),type:"error"})}}))}async function me(){re.value=!0;try{a.TxFee.isRemember&&await a.updateTxFeeInfo();let e=await(0,d.qS)(se.value,L.value);m.notify({group:"default",clean:!0}),m.notify({group:"default",speed:200,duration:-100,title:p.global.t("message.notification_tx_pending_title"),type:"pending",data:{isCollapsible:!0,explorer_link:(0,d.aS)(a.currentNetwork)}}),(0,d.nw)(e).catch((e=>{console.log(e),be(e)})),n.push("/account")}catch(e){console.log(e),be(e)}}function be(e){re.value=!1;let n="";n=e.code?p.global.t(`message.notification_tx_error_${e.code}`):p.global.t("message.notification_tx_error_rejected"),m.notify({group:"default",clean:!0}),m.notify({group:"default",speed:200,duration:6e3,title:p.global.t("message.notification_tx_error_title"),text:n,type:"error"}),a.networks[a.currentNetwork].currentTxHash=null,a.resetTxFee()}function ge(){h.value=!0}function fe(){oe.value=!0,a.isAnyModalOpen=!0}return(0,t.sV)((()=>{f.value&&de(),y.value&&_e(),Telegram.WebApp.onEvent("qrTextReceived",(()=>{ve()}))})),(0,t.hi)((()=>{_.off("auth"),_.off("close_sign_tx_modal"),Telegram.WebApp.offEvent("qrTextReceived")})),(0,t.wB)((0,t.EW)((()=>r.query.denom)),(()=>{ve()})),(0,t.wB)((0,t.EW)((()=>r.query.address)),(()=>{ve()})),(0,t.wB)((0,t.EW)((()=>ie.value)),(()=>{ie.value&&(se.value=[{typeUrl:"/cosmos.bank.v1beta1.MsgSend",value:{fromAddress:a.currentAddress,toAddress:f.value,amount:[{denom:b.value.denom,amount:""+parseFloat(y.value.toString().replace(",",".")).toFixed(b.value.exponent)*Math.pow(10,b.value.exponent)}]}}])})),_.on("auth",(()=>{oe.value=!1,a.isAnyModalOpen=!1,me()})),_.on("close_tokens_modal",(()=>{h.value=!1})),_.on("close_sign_tx_modal",(()=>{oe.value=!1,a.isAnyModalOpen=!1})),_.on("close_any_modal",(()=>{h.value=!1,oe.value=!1,a.isAnyModalOpen=!1})),(e,n)=>{const r=(0,t.g2)("router-link");return(0,t.uX)(),(0,t.CE)(t.FK,null,[(0,t.Lk)("section",$,[re.value?((0,t.uX)(),(0,t.Wv)(k.A,{key:0})):(0,t.Q3)("",!0),(0,t.Lk)("div",A,[(0,t.Lk)("div",E,[(0,t.bF)(r,{to:"/account",class:"back_btn"},{default:(0,t.k6)((()=>n[12]||(n[12]=[(0,t.Lk)("svg",{class:"icon"},[(0,t.Lk)("use",{"xlink:href":T})],-1)]))),_:1}),(0,t.Lk)("div",X,(0,l.v_)(e.$t("message.send_page_title")),1)]),b.value?((0,t.uX)(),(0,t.CE)("div",{key:0,class:"token_wrap",onClick:n[0]||(n[0]=(0,o.D$)((e=>ge()),["prevent"]))},[(0,t.Lk)("div",W,[(0,t.Lk)("div",F,[(0,t.Lk)("img",{src:b.value.token_info.logo_URIs.svg,alt:"",loading:"lazy"},null,8,N)]),(0,t.Lk)("div",I,(0,l.v_)(b.value.token_info.symbol),1),(0,t.Lk)("div",K,[(0,t.Lk)("div",S,(0,l.v_)((0,s.R1)(d.NJ)(b.value.amount,b.value.exponent).toLocaleString("ru-RU",{maximumFractionDigits:7}).replace(",",".")),1),(0,t.Lk)("div",q,(0,l.v_)((0,s.R1)(d.ST)((0,s.R1)(d.Y$)(b.value.token_info.symbol,b.value.amount,b.value.exponent)))+" "+(0,l.v_)((0,s.R1)(a).currentCurrencySymbol),1)])])])):((0,t.uX)(),(0,t.CE)("div",{key:1,class:"token_wrap",onClick:n[1]||(n[1]=(0,o.D$)((e=>ge()),["prevent"]))},[(0,t.Lk)("div",B,[(0,t.Lk)("div",Q,[(0,t.Lk)("img",{src:(0,s.R1)(d.oB)((0,s.R1)(a).networks[(0,s.R1)(a).currentNetwork].chain_id),alt:""},null,8,D)]),(0,t.Lk)("div",J,(0,l.v_)((0,s.R1)(a).networks[(0,s.R1)(a).currentNetwork].token_name),1),(0,t.Lk)("div",M,[n[13]||(n[13]=(0,t.Lk)("div",{class:"val"},"0",-1)),(0,t.Lk)("div",U," 0.00 "+(0,l.v_)((0,s.R1)(a).currentCurrencySymbol),1)])])])),(0,t.Lk)("div",O,[(0,t.Lk)("div",V,(0,l.v_)(e.$t("message.send_address_label")),1),(0,t.Lk)("div",G,[(0,t.bo)((0,t.Lk)("input",{type:"text",class:"input big","onUpdate:modelValue":n[2]||(n[2]=e=>f.value=e),ref_key:"addressInput",ref:g,placeholder:e.$t("message.placeholder_address"),onInput:n[3]||(n[3]=e=>de()),onPaste:n[4]||(n[4]=e=>de())},null,40,Y),[[o.Jo,f.value]]),(0,t.Lk)("button",{class:"paste_btn",onClick:n[5]||(n[5]=(0,o.D$)((e=>pe()),["prevent"]))},(0,l.v_)(e.$t("message.btn_paste")),1),(0,t.bF)(C.A,{class:"in_field"})])]),(0,t.Lk)("div",j,[(0,t.Lk)("div",z,[(0,t.eW)((0,l.v_)(e.$t("message.send_amount_label"))+" ",1),(0,t.Lk)("div",H,(0,l.v_)((0,s.R1)(d.ST)((0,s.R1)(d.Y$)((0,s.R1)(a).networks[(0,s.R1)(a).currentNetwork].token_name,y.value*Math.pow(10,(0,s.R1)(a).networks[(0,s.R1)(a).currentNetwork].exponent),(0,s.R1)(a).networks[(0,s.R1)(a).currentNetwork].exponent)))+" "+(0,l.v_)((0,s.R1)(a).currentCurrencySymbol),1)]),(0,t.Lk)("div",P,[(0,t.bo)((0,t.Lk)("input",{type:"number",inputmode:"numeric",class:"input big","onUpdate:modelValue":n[6]||(n[6]=e=>y.value=e),placeholder:e.$t("message.placeholder_amount",{token:b.value.token_info.symbol}),onInput:n[7]||(n[7]=e=>_e())},null,40,Z),[[o.Jo,y.value]]),(0,t.Lk)("button",{type:"button",class:"max_btn",onClick:(0,o.D$)(ke,["prevent"])},(0,l.v_)(e.$t("message.btn_MAX")),1)])]),(0,t.Lk)("div",ee,[(0,t.Lk)("div",ae,(0,l.v_)(e.$t("message.memo_label")),1),(0,t.Lk)("div",ne,[(0,t.bo)((0,t.Lk)("input",{type:"text",class:"input big","onUpdate:modelValue":n[8]||(n[8]=e=>L.value=e),placeholder:e.$t("message.placeholder_memo")},null,8,te),[[o.Jo,L.value]])])]),ie.value?((0,t.uX)(),(0,t.Wv)(x.A,{key:2,msgAny:se.value,txType:"send"},null,8,["msgAny"])):(0,t.Q3)("",!0),(0,t.Lk)("div",le,[(0,s.R1)(a).networks[(0,s.R1)(a).currentNetwork].currentTxHash?((0,t.uX)(),(0,t.CE)("button",{key:1,class:"btn waiting_btn",onClick:n[10]||(n[10]=(0,o.D$)((e=>(0,s.R1)(_).emit("show_collapsible_notification")),["prevent"]))},[(0,t.Lk)("span",null,(0,l.v_)(e.$t("message.btn_waiting_tx")),1)])):((0,t.uX)(),(0,t.CE)("button",{key:0,class:(0,l.C4)(["btn",{disabled:!(0,s.R1)(a).TxFee.isEnough}]),onClick:n[9]||(n[9]=(0,o.D$)((e=>fe()),["prevent"]))},[(0,t.Lk)("span",null,(0,l.v_)(e.$t("message.btn_send")),1)],2))])])]),(0,t.bF)(o.eB,{name:"from_right"},{default:(0,t.k6)((()=>[h.value?((0,t.uX)(),(0,t.Wv)(R,{key:0,currentToken:b.value},null,8,["currentToken"])):(0,t.Q3)("",!0)])),_:1}),(0,t.bF)(o.eB,{name:"modal"},{default:(0,t.k6)((()=>[oe.value?((0,t.uX)(),(0,t.Wv)(w.A,{key:0})):(0,t.Q3)("",!0)])),_:1}),(0,t.bF)(o.eB,{name:"fade"},{default:(0,t.k6)((()=>[oe.value?((0,t.uX)(),(0,t.CE)("div",{key:0,class:"modal_overlay",onClick:n[11]||(n[11]=(0,o.D$)((e=>(0,s.R1)(_).emit("close_any_modal")),["prevent"]))})):(0,t.Q3)("",!0)])),_:1})],64)}}};const se=(0,L.A)(oe,[["__scopeId","data-v-27000286"]]);var re=se}}]);
//# sourceMappingURL=518.f57b45fa.js.map