"use strict";(self["webpackChunkcosmos_telegram_signer"]=self["webpackChunkcosmos_telegram_signer"]||[]).push([[912],{17291:function(e,a,t){t.r(a),t.d(a,{default:function(){return M}});t(44114);var s=t(56768),l=t(24232),n=t(90144),o=t(45130),i=t(24113),r=t(20033),c=t(81387),u=t(67278),d=t(43738),_=t(32344),v=t(74901),g=t(45787),m=t(91497);const k=i+"#ic_arrow_hor",p={class:"page_container inner_page_container claim_confirm"},f={class:"cont"},b={class:"head"},h={class:"page_title"},w={class:"data"},R={class:"field_label"},y={class:"info_wrap"},L={class:"info"},x={class:"logo"},C=["src"],$={class:"title"},A={class:"amount"},T={class:"val"},F={class:"cost"},S={key:0,class:"not_enought"},W={class:"memo"},K={class:"field_label"},X={class:"field"},D=["placeholder"],E={class:"btns"};var Q={__name:"ClaimConfirmPage",setup(e){const a=(0,r.useGlobalStore)(),t=(0,c.rd)(),i=(0,s.WQ)("emitter"),Q=(0,s.WQ)("i18n"),B=(0,u.hN)(),N=(0,n.KR)(""),M=(0,n.KR)(!1),U=(0,n.KR)(!1),H=(0,n.KR)([]),P=(0,n.KR)(!1);async function G(){P.value=!0;try{a.TxFee.isRemember&&await a.updateTxFeeInfo();let e=await(0,d.qS)(H.value,N.value);B.notify({group:"default",clean:!0}),B.notify({group:"default",speed:200,duration:-100,title:Q.global.t("message.notification_tx_pending_title"),type:"pending",data:{isCollapsible:!0,explorer_link:(0,d.aS)(a.currentNetwork)}}),(0,d.nw)(e).catch((e=>{console.log(e),I(e)})),t.push("/account")}catch(e){console.error(`Account/ClaimConfirmPage.vue: ${e.message}`),I(e)}}function I(e){P.value=!1;let t="";t=e.code?Q.global.t(`message.notification_tx_error_${e.code}`):Q.global.t("message.notification_tx_error_rejected"),B.notify({group:"default",clean:!0}),B.notify({group:"default",speed:200,duration:6e3,title:Q.global.t("message.notification_tx_error_title"),text:t,type:"error"}),a.networks[a.currentNetwork].currentTxHash=null,a.resetTxFee()}function J(){M.value=!0,a.isAnyModalOpen=!0}function O(){M.value=!1,a.isAnyModalOpen=!1}function V(){closeHandler(),G()}return(0,s.KC)((()=>{a.stakedBalances.forEach((e=>{H.value.push({typeUrl:"/cosmos.distribution.v1beta1.MsgWithdrawDelegatorReward",value:_.MsgWithdrawDelegatorReward.fromPartial({delegatorAddress:a.currentAddress,validatorAddress:e.validator_info.operator_address})})}))})),(0,s.sV)((()=>{i.on("auth",V),i.on("close_sign_tx_modal",O)})),(0,s.hi)((()=>{i.off("auth",V),i.off("close_sign_tx_modal",O)})),(e,t)=>{const r=(0,s.g2)("router-link"),c=(0,s.g2)("TxWarningModal");return(0,s.uX)(),(0,s.CE)(s.FK,null,[(0,s.Lk)("section",p,[P.value?((0,s.uX)(),(0,s.Wv)(v.A,{key:0})):(0,s.Q3)("",!0),(0,s.Lk)("div",f,[(0,s.Lk)("div",b,[(0,s.bF)(r,{to:"/account?activeSlide=1",class:"back_btn"},{default:(0,s.k6)((()=>t[3]||(t[3]=[(0,s.Lk)("svg",{class:"icon"},[(0,s.Lk)("use",{"xlink:href":k})],-1)]))),_:1}),(0,s.Lk)("div",h,(0,l.v_)(e.$t("message.claim_rewards_page_title")),1)]),(0,s.Lk)("div",w,[(0,s.Lk)("div",R,(0,l.v_)(e.$t("message.details_label")),1),(0,s.Lk)("div",y,[(0,s.Lk)("div",L,[(0,s.Lk)("div",x,[(0,s.Lk)("img",{src:(0,n.R1)(d.oB)((0,n.R1)(a).networks[(0,n.R1)(a).currentNetwork].chain_id),alt:""},null,8,C)]),(0,s.Lk)("div",$,(0,l.v_)(e.$t("message.claim_rewards_title")),1),(0,s.Lk)("div",A,[(0,s.Lk)("div",T," ~ "+(0,l.v_)((0,n.R1)(d.NJ)((0,n.R1)(a).rewardsBalances[0].amount,(0,n.R1)(a).rewardsBalances[0].exponent).toLocaleString("ru-RU",{maximumFractionDigits:5}).replace(",","."))+" "+(0,l.v_)((0,n.R1)(a).rewardsBalances[0].token_info.symbol),1),(0,s.Lk)("div",F," ~ "+(0,l.v_)((0,n.R1)(d.ST)((0,n.R1)(d.Ko)("USD"),"USD"))+"$ ",1)])])]),(0,n.R1)(a).TxFee.isEnough?(0,s.Q3)("",!0):((0,s.uX)(),(0,s.CE)("div",S,(0,l.v_)(e.$t("message.claim_rewards_not_enought",{denom:(0,n.R1)(a).TxFee.currentSymbol})),1))]),(0,s.Lk)("div",W,[(0,s.Lk)("div",K,(0,l.v_)(e.$t("message.memo_label")),1),(0,s.Lk)("div",X,[(0,s.bo)((0,s.Lk)("input",{type:"text",class:"input big","onUpdate:modelValue":t[0]||(t[0]=e=>N.value=e),placeholder:e.$t("message.placeholder_memo2")},null,8,D),[[o.Jo,N.value]])])]),(0,n.R1)(a).isBalancesGot?((0,s.uX)(),(0,s.Wv)(g.A,{key:0,msgAny:H.value,txType:"claim"},null,8,["msgAny"])):(0,s.Q3)("",!0),(0,s.Lk)("div",E,[(0,n.R1)(a).networks[(0,n.R1)(a).currentNetwork].currentTxHash?((0,s.uX)(),(0,s.CE)("button",{key:1,class:"btn waiting_btn",onClick:t[2]||(t[2]=(0,o.D$)((e=>(0,n.R1)(i).emit("show_collapsible_notification")),["prevent"]))},[(0,s.Lk)("span",null,(0,l.v_)(e.$t("message.btn_waiting_tx")),1)])):((0,s.uX)(),(0,s.CE)("button",{key:0,class:(0,l.C4)(["btn",{disabled:!(0,n.R1)(a).TxFee.isEnough}]),onClick:t[1]||(t[1]=(0,o.D$)((e=>J()),["prevent"]))},[(0,s.Lk)("span",null,(0,l.v_)(e.$t("message.btn_approve")),1)],2))])])]),M.value?((0,s.uX)(),(0,s.Wv)(m.A,{key:0})):(0,s.Q3)("",!0),U.value?((0,s.uX)(),(0,s.Wv)(c,{key:1})):(0,s.Q3)("",!0)],64)}}},B=t(71241);const N=(0,B.A)(Q,[["__scopeId","data-v-66352e40"]]);var M=N}}]);
//# sourceMappingURL=912.1e63ebc6.js.map