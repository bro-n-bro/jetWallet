"use strict";(self["webpackChunkcosmos_telegram_signer"]=self["webpackChunkcosmos_telegram_signer"]||[]).push([[626],{50151:function(e,a,t){t.d(a,{A:function(){return X}});var l=t(56768),s=t(24232),n=t(45130),i=t(90144),o=t(24113),c=t(76750),u=t(61981);const r=e=>((0,l.Qi)("data-v-7f08a64f"),e=e(),(0,l.jt)(),e),d=o+"#ic_biometric_face",v=o+"#ic_biometric_finger",m={class:"pin"},k={class:"label"},_={class:"field"},p={class:"field"},g=["disabled"],b={class:"field"},L=["disabled"],f={class:"field"},h=["disabled"],w={class:"field"},x=["disabled"],y={class:"field"},R=["disabled"],C={key:0,class:"warning"},A={key:0,class:"icon"},$=r((()=>(0,l.Lk)("use",{"xlink:href":d},null,-1))),E=[$],T={key:1,class:"icon"},F=r((()=>(0,l.Lk)("use",{"xlink:href":v},null,-1))),K=[F];var W={__name:"Auth",setup(e){const a=(0,c.o)(),t=(0,l.WQ)("emitter"),o=(0,i.KR)(["","","","","",""]),r=(0,i.KR)(""),d=(0,i.KR)(""),v=(0,i.KR)(!1),$=(0,i.KR)(!1),F=(0,i.KR)(!1),W=(0,i.KR)(!1),Q=(0,i.KR)("finger");function j(e,a){e.target.value.length>=1&&a<6&&e.target.closest(".row").querySelector(`.field:nth-child(${a+1}) input`).focus()}function X(e,a){setTimeout((()=>{0===e.target.value.length&&a>0&&e.target.closest(".row").querySelector(`.field:nth-child(${a}) input`).select()}))}function B(){Telegram.WebApp.isAccessGranted?D():Telegram.WebApp.BiometricManager.requestAccess({reason:"Наш текст"},(()=>D()))}function D(){Telegram.WebApp.BiometricManager.authenticate({reason:"Наш текст"},(e=>{e&&t.emit("auth")}))}async function I(){let e=await M();e?t.emit("auth"):await S()}async function M(){let e=await(0,u.mK)(o.value.join(""),d.value);return e===r.value}async function S(){v.value=!0;let e=$.value-1;$.value=e,e?a.updateUserAuthErrorLimit(e):t.emit("show_error_auth_modal"),o.value=["","","","","",""],v.value=!1}(0,l.KC)((async()=>{let e=await a.getMultipleData(["pin","hmacKey","authErrorLimit","isBiometric"]);r.value=e.pin,d.value=e.hmacKey,$.value=e.authErrorLimit,F.value=e.isBiometric,W.value=Telegram.WebApp.BiometricManager.isBiometricAvailable,"unknown"!=Telegram.WebApp.BiometricManager.biometricType&&(Q.value=Telegram.WebApp.BiometricManager.biometricType),W.value&&F.value&&B()})),(0,l.wB)(o.value,(()=>{o.value[5].length&&document.activeElement.blur(),o.value[5].length&&$.value===a.authErrorLimit&&I()}));const J=(0,l.EW)((()=>""!=o.value[5].length));return(e,t)=>((0,l.uX)(),(0,l.CE)(l.FK,null,[(0,l.Lk)("div",m,[(0,l.Lk)("div",k,(0,s.v_)(e.$t("message.auth_enter_pin_label")),1),(0,l.Lk)("div",{class:(0,s.C4)(["row",{error:v.value}])},[(0,l.Lk)("div",_,[(0,l.bo)((0,l.Lk)("input",{type:"password",class:(0,s.C4)(["input big",{active:o.value[0].length}]),"onUpdate:modelValue":t[0]||(t[0]=e=>o.value[0]=e),maxlength:"1",inputmode:"numeric",ref:"inputRef",onInput:t[1]||(t[1]=e=>j(e,1)),onKeydown:t[2]||(t[2]=(0,n.jR)((e=>X(e,0)),["backspace"]))},null,34),[[n.Jo,o.value[0]]])]),(0,l.Lk)("div",p,[(0,l.bo)((0,l.Lk)("input",{type:"password",class:(0,s.C4)(["input big",{active:o.value[1].length}]),"onUpdate:modelValue":t[3]||(t[3]=e=>o.value[1]=e),maxlength:"1",inputmode:"numeric",disabled:!o.value[0].length,onInput:t[4]||(t[4]=e=>j(e,2)),onKeydown:t[5]||(t[5]=(0,n.jR)((e=>X(e,1)),["backspace"]))},null,42,g),[[n.Jo,o.value[1]]])]),(0,l.Lk)("div",b,[(0,l.bo)((0,l.Lk)("input",{type:"password",class:(0,s.C4)(["input big",{active:o.value[2].length}]),"onUpdate:modelValue":t[6]||(t[6]=e=>o.value[2]=e),maxlength:"1",inputmode:"numeric",disabled:!o.value[1].length,onInput:t[7]||(t[7]=e=>j(e,3)),onKeydown:t[8]||(t[8]=(0,n.jR)((e=>X(e,2)),["backspace"]))},null,42,L),[[n.Jo,o.value[2]]])]),(0,l.Lk)("div",f,[(0,l.bo)((0,l.Lk)("input",{type:"password",class:(0,s.C4)(["input big",{active:o.value[3].length}]),"onUpdate:modelValue":t[9]||(t[9]=e=>o.value[3]=e),maxlength:"1",inputmode:"numeric",disabled:!o.value[2].length,onInput:t[10]||(t[10]=e=>j(e,4)),onKeydown:t[11]||(t[11]=(0,n.jR)((e=>X(e,3)),["backspace"]))},null,42,h),[[n.Jo,o.value[3]]])]),(0,l.Lk)("div",w,[(0,l.bo)((0,l.Lk)("input",{type:"password",class:(0,s.C4)(["input big",{active:o.value[4].length}]),"onUpdate:modelValue":t[12]||(t[12]=e=>o.value[4]=e),maxlength:"1",inputmode:"numeric",disabled:!o.value[3].length,onInput:t[13]||(t[13]=e=>j(e,5)),onKeydown:t[14]||(t[14]=(0,n.jR)((e=>X(e,4)),["backspace"]))},null,42,x),[[n.Jo,o.value[4]]])]),(0,l.Lk)("div",y,[(0,l.bo)((0,l.Lk)("input",{type:"password",class:(0,s.C4)(["input big",{active:o.value[5].length}]),"onUpdate:modelValue":t[15]||(t[15]=e=>o.value[5]=e),maxlength:"1",inputmode:"numeric",disabled:!o.value[4].length,onInput:t[16]||(t[16]=e=>j(e,6)),onKeydown:t[17]||(t[17]=(0,n.jR)((e=>X(e,5)),["backspace"]))},null,42,R),[[n.Jo,o.value[5]]])])],2),$.value<(0,i.R1)(a).authErrorLimit?((0,l.uX)(),(0,l.CE)("div",C,(0,s.v_)(e.$t("message.auth_error_warning",{count:$.value})),1)):(0,l.Q3)("",!0)]),W.value&&$.value==(0,i.R1)(a).authErrorLimit?((0,l.uX)(),(0,l.CE)("button",{key:0,class:(0,s.C4)(["biometric_btn",{show:!e.loading}]),onClick:(0,n.D$)(B,["prevent"])},[(0,l.Lk)("span",null,(0,s.v_)(e.$t("message.btn_biometric2")),1),"face"===e.biometrictype?((0,l.uX)(),(0,l.CE)("svg",A,E)):((0,l.uX)(),(0,l.CE)("svg",T,K))],2)):(0,l.Q3)("",!0),(0,l.Lk)("div",{class:(0,s.C4)(["btns",{show:!e.loading}])},[$.value<(0,i.R1)(a).authErrorLimit?((0,l.uX)(),(0,l.CE)("button",{key:0,class:(0,s.C4)(["btn",{disabled:!J.value}]),onClick:t[18]||(t[18]=(0,n.D$)((e=>I()),["prevent"]))},[(0,l.Lk)("span",null,(0,s.v_)(e.$t("message.btn_login")),1)],2)):(0,l.Q3)("",!0)],2)],64))}},Q=t(71241);const j=(0,Q.A)(W,[["__scopeId","data-v-7f08a64f"]]);var X=j},89114:function(e,a,t){t.d(a,{A:function(){return d}});var l=t(56768);const s={class:"loader_wrap"},n=(0,l.Lk)("div",{class:"loader"},[(0,l.Lk)("span")],-1),i=[n];function o(e,a){return(0,l.uX)(),(0,l.CE)("div",s,i)}var c=t(71241);const u={},r=(0,c.A)(u,[["render",o]]);var d=r},59626:function(e,a,t){t.r(a),t.d(a,{default:function(){return he}});t(44114);var l=t(56768),s=t(24232),n=t(90144),i=t(45130),o=t(24113),c=t(76750),u=t(81387),r=t(67278),d=t(61981),v=t(89114);const m=e=>((0,l.Qi)("data-v-297c0382"),e=e(),(0,l.jt)(),e),k=o+"#ic_close",_=o+"#ic_check",p=o+"#ic_arr_ver2",g={class:"modal"},b={class:"modal_content"},L={class:"data"},f=m((()=>(0,l.Lk)("svg",{class:"icon"},[(0,l.Lk)("use",{"xlink:href":k})],-1))),h=[f],w={class:"modal_title"},x=m((()=>(0,l.Lk)("div",{class:"fee_tier"},[(0,l.Lk)("div",{class:"label"},[(0,l.Lk)("span",null,"Fee tier"),(0,l.Lk)("button",{class:"toggle_btn"},[(0,l.Lk)("span",null,"Remember my choise"),(0,l.Lk)("div",{class:"toggle_wrap"},[(0,l.Lk)("div",{class:"toggle"},[(0,l.Lk)("div",{class:"ball_wrap"},[(0,l.Lk)("div",{class:"ball"},[(0,l.Lk)("svg",null,[(0,l.Lk)("use",{"xlink:href":_})])])])])])])]),(0,l.Lk)("div",{class:"vals_wrap"},[(0,l.Lk)("div",{class:"vals"},[(0,l.Lk)("button",{class:"btn"},[(0,l.Lk)("div",{class:"name"},"Low"),(0,l.Lk)("div",{class:"cost"},"<$0.01"),(0,l.Lk)("div",{class:"amount"},"0.0001"),(0,l.Lk)("div",{class:"denom"},"OSMO")]),(0,l.Lk)("button",{class:"btn active"},[(0,l.Lk)("div",{class:"name"},"Average"),(0,l.Lk)("div",{class:"cost"},"<$0.01"),(0,l.Lk)("div",{class:"amount"},"0.0001"),(0,l.Lk)("div",{class:"denom"},"OSMO")]),(0,l.Lk)("button",{class:"btn"},[(0,l.Lk)("div",{class:"name"},"High"),(0,l.Lk)("div",{class:"cost"},"<$0.01"),(0,l.Lk)("div",{class:"amount"},"0.0001"),(0,l.Lk)("div",{class:"denom"},"OSMO")])])])],-1))),y={class:"fee_token"},R=m((()=>(0,l.Lk)("div",{class:"label"}," Fee Token: ",-1))),C={class:"field"},A=["value"],$=m((()=>(0,l.Lk)("svg",{class:"arr"},[(0,l.Lk)("use",{"xlink:href":p})],-1))),E={class:"gas_adjustment"},T=(0,l.Fv)('<div class="label" data-v-297c0382><span data-v-297c0382>Gas Adjustment:</span><button class="toggle_btn" data-v-297c0382><span data-v-297c0382>Auto</span><div class="toggle_wrap" data-v-297c0382><div class="toggle" data-v-297c0382><div class="ball_wrap" data-v-297c0382><div class="ball" data-v-297c0382><svg data-v-297c0382><use xlink:href="'+_+'" data-v-297c0382></use></svg></div></div></div></div></button></div>',1),F={class:"field"},K={class:"btns"};var W={__name:"TxFeeModal",setup(e){const a=(0,c.o)(),t=(0,l.WQ)("emitter");return(e,o)=>((0,l.uX)(),(0,l.CE)("section",g,[(0,l.Lk)("div",b,[(0,l.Lk)("div",L,[(0,l.Lk)("button",{class:"close_btn",onClick:o[0]||(o[0]=(0,i.D$)((e=>(0,n.R1)(t).emit("close_tx_fee_modal")),["prevent"]))},h),(0,l.Lk)("div",w,(0,s.v_)(e.$t("message.tx_fee_modal_title")),1),x,(0,l.Lk)("div",y,[R,(0,l.Lk)("div",C,[(0,l.Lk)("input",{type:"text",class:"input big",value:(0,n.R1)(a).TxFee.currentSymbol,readonly:""},null,8,A),$])]),(0,l.Lk)("div",E,[T,(0,l.Lk)("div",F,[(0,l.bo)((0,l.Lk)("input",{type:"number",class:"input big","onUpdate:modelValue":o[1]||(o[1]=e=>(0,n.R1)(a).TxFee.gasAdjustment=e)},null,512),[[i.Jo,(0,n.R1)(a).TxFee.gasAdjustment]])])]),(0,l.Lk)("div",K,[(0,l.Lk)("button",{class:"btn",onClick:o[2]||(o[2]=(0,i.D$)((e=>(0,n.R1)(t).emit("close_tx_fee_modal")),["prevent"]))},[(0,l.Lk)("span",null,(0,s.v_)(e.$t("message.btn_close")),1)])])])]),(0,l.Lk)("div",{class:"overlay",onClick:o[3]||(o[3]=(0,i.D$)((e=>(0,n.R1)(t).emit("close_tx_fee_modal")),["prevent"]))})]))}},Q=t(71241);const j=(0,Q.A)(W,[["__scopeId","data-v-297c0382"]]);var X=j;const B={class:"tx_fee"};var D={__name:"TxFee",setup(e){const a=(0,c.o)(),t=(0,l.WQ)("emitter"),o=(0,n.KR)(!1),u=a.balances.find((e=>e.denom==a.networks[a.currentNetwork].denom));return(0,l.KC)((()=>{a.TxFeeSetCurrentAmount(a.networks[a.currentNetwork].chain_id),a.TxFeeSetCurrentDenom(a.networks[a.currentNetwork].denom,a.networks[a.currentNetwork].token_name),a.TxFee.isEnough=(0,d.NJ)(u.amount,u.exponent)>a.TxFee.currentAmount})),(0,l.wB)((0,l.EW)((()=>a.isBalancesGot)),(()=>{a.TxFee.isEnough=(0,d.NJ)(u.amount,u.exponent)>a.TxFee.currentAmount})),t.on("close_tx_fee_modal",(()=>{o.value=!1})),(e,t)=>((0,l.uX)(),(0,l.CE)(l.FK,null,[(0,l.Lk)("div",B,[(0,l.Lk)("button",{class:(0,s.C4)(["btn",{red:!(0,n.R1)(a).TxFee.isEnough}]),onClick:t[0]||(t[0]=(0,i.D$)((e=>o.value=!0),["prevent"]))},(0,s.v_)(e.$t("message.tx_fee_label"))+" "+(0,s.v_)((0,n.R1)(a).TxFee.currentAmount)+" "+(0,s.v_)((0,n.R1)(a).TxFee.currentSymbol),3)]),o.value?((0,l.uX)(),(0,l.Wv)(X,{key:0})):(0,l.Q3)("",!0)],64))}};const I=(0,Q.A)(D,[["__scopeId","data-v-0e6bf2ee"]]);var M=I,S=t(50151);const J=e=>((0,l.Qi)("data-v-dc5a976e"),e=e(),(0,l.jt)(),e),U=o+"#ic_close",N={class:"modal"},V={class:"modal_content"},O={class:"data"},q=J((()=>(0,l.Lk)("svg",{class:"icon"},[(0,l.Lk)("use",{"xlink:href":U})],-1))),G=[q],H={class:"modal_title"},P={class:"auth_wrap"};var z={__name:"SignTx",setup(e){const a=(0,l.WQ)("emitter");return(e,t)=>((0,l.uX)(),(0,l.CE)("section",N,[(0,l.Lk)("div",V,[(0,l.Lk)("div",O,[(0,l.Lk)("button",{class:"close_btn",onClick:t[0]||(t[0]=(0,i.D$)((e=>(0,n.R1)(a).emit("close_sign_tx_modal")),["prevent"]))},G),(0,l.Lk)("div",H,(0,s.v_)(e.$t("message.sign_tx_title")),1),(0,l.Lk)("div",P,[(0,l.bF)(S.A)])])]),(0,l.Lk)("div",{class:"overlay",onClick:t[1]||(t[1]=(0,i.D$)((e=>(0,n.R1)(a).emit("close_sign_tx_modal")),["prevent"]))})]))}};const Y=(0,Q.A)(z,[["__scopeId","data-v-dc5a976e"]]);var Z=Y;const ee=e=>((0,l.Qi)("data-v-09aa3392"),e=e(),(0,l.jt)(),e),ae=o+"#ic_arrow_hor",te={class:"page_container claim_confirm"},le={class:"cont"},se={class:"head"},ne=ee((()=>(0,l.Lk)("svg",{class:"icon"},[(0,l.Lk)("use",{"xlink:href":ae})],-1))),ie={class:"page_title"},oe={class:"data"},ce={class:"label"},ue={class:"info_wrap"},re={class:"info"},de={class:"logo"},ve=["src"],me={class:"title"},ke={key:0,class:"not_enought"},_e={class:"memo"},pe={class:"label"},ge={class:"field"},be={class:"btns"};var Le={__name:"ClaimConfirmPage",setup(e){const a=(0,c.o)(),t=(0,u.rd)(),o=(0,l.WQ)("emitter"),m=(0,l.WQ)("i18n"),k=(0,r.hN)(),_=(0,n.KR)(""),p=(0,n.KR)(!1),g=(0,n.KR)(!1);async function b(){p.value=!0;try{let e=[];a.stakedBalances.forEach((t=>{e.push({typeUrl:"/cosmos.distribution.v1beta1.MsgWithdrawDelegatorReward",value:{delegatorAddress:a.currentAddress,validatorAddress:t.validator_info.operator_address}})}));let l=await(0,d.nw)(e);0===l.code?(await a.getRewards(),k.notify({group:"default",clean:!0}),k.notify({group:"default",speed:200,duration:2e3,title:m.global.t("message.notification_tx_success_title"),type:"success"}),t.push("/account")):(console.log(l),L(l),p.value=!1)}catch(e){console.log(e),L(e),p.value=!1}}function L(e){let a="";a=e.code?m.global.t(`message.notification_tx_error_${e.code}`):m.global.t("message.notification_tx_error_rejected"),k.notify({group:"default",clean:!0}),k.notify({group:"default",title:m.global.t("message.notification_tx_error_title"),text:a,type:"error"})}return(0,l.hi)((()=>{o.off("auth"),o.off("close_sign_tx_modal")})),o.on("auth",(()=>{g.value=!1,b()})),o.on("close_sign_tx_modal",(()=>{g.value=!1})),(e,t)=>{const o=(0,l.g2)("router-link");return(0,l.uX)(),(0,l.CE)(l.FK,null,[(0,l.Lk)("section",te,[p.value?((0,l.uX)(),(0,l.Wv)(v.A,{key:0})):(0,l.Q3)("",!0),(0,l.Lk)("div",le,[(0,l.Lk)("div",se,[(0,l.bF)(o,{to:"/account",class:"back_btn"},{default:(0,l.k6)((()=>[ne])),_:1}),(0,l.Lk)("div",ie,(0,s.v_)(e.$t("message.claim_rewards_page_title")),1)]),(0,l.Lk)("div",oe,[(0,l.Lk)("div",ce,(0,s.v_)(e.$t("message.details_label")),1),(0,l.Lk)("div",ue,[(0,l.Lk)("div",re,[(0,l.Lk)("div",de,[(0,l.Lk)("img",{src:(0,n.R1)(d.oB)((0,n.R1)(a).networks[(0,n.R1)(a).currentNetwork].chain_id),alt:""},null,8,ve)]),(0,l.Lk)("div",me,(0,s.v_)(e.$t("message.claim_rewards_title")),1)])]),(0,n.R1)(a).TxFee.isEnough?(0,l.Q3)("",!0):((0,l.uX)(),(0,l.CE)("div",ke,(0,s.v_)(e.$t("message.claim_rewards_not_enought",{denom:(0,n.R1)(a).TxFee.currentSymbol})),1))]),(0,l.Lk)("div",_e,[(0,l.Lk)("div",pe,(0,s.v_)(e.$t("message.memo_label")),1),(0,l.Lk)("div",ge,[(0,l.bo)((0,l.Lk)("input",{type:"text",class:"input big","onUpdate:modelValue":t[0]||(t[0]=e=>_.value=e)},null,512),[[i.Jo,_.value]])])]),(0,l.bF)(M),(0,l.Lk)("div",be,[(0,l.Lk)("button",{class:(0,s.C4)(["btn",{disabled:!(0,n.R1)(a).TxFee.isEnough}]),onClick:t[1]||(t[1]=(0,i.D$)((e=>g.value=!0),["prevent"]))},[(0,l.Lk)("span",null,(0,s.v_)(e.$t("message.btn_approve")),1)],2)])])]),g.value?((0,l.uX)(),(0,l.Wv)(Z,{key:0})):(0,l.Q3)("",!0)],64)}}};const fe=(0,Q.A)(Le,[["__scopeId","data-v-09aa3392"]]);var he=fe}}]);
//# sourceMappingURL=626.e8e48d0e.js.map