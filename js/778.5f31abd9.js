"use strict";(self["webpackChunkcosmos_telegram_signer"]=self["webpackChunkcosmos_telegram_signer"]||[]).push([[778],{51673:function(e,a,t){t.d(a,{A:function(){return _}});var n=t(56768),l=t(45130),o=t(24113);const s=e=>((0,n.Qi)("data-v-178c8d2c"),e=e(),(0,n.jt)(),e),u=o+"#ic_scaner",r=s((()=>(0,n.Lk)("svg",{class:"icon"},[(0,n.Lk)("use",{"xlink:href":u})],-1))),i=[r];var c={__name:"QRCodeScanner",setup(e){function a(){Telegram.WebApp.showScanQrPopup({text:"Наш текст"})}return(e,t)=>((0,n.uX)(),(0,n.CE)("button",{class:"btn",onClick:t[0]||(t[0]=(0,l.D$)((e=>a()),["prevent"]))},i))}},d=t(71241);const v=(0,d.A)(c,[["__scopeId","data-v-178c8d2c"]]);var _=v},45606:function(e,a,t){t.r(a),t.d(a,{default:function(){return V}});t(44114);var n=t(56768),l=t(24232),o=t(90144),s=t(45130),u=t(24113),r=t(76750),i=t(81387),c=t(67278),d=t(89354),v=t(61981),_=t(17086),m=t(65559),k=t(86255),p=t(51673);const f=e=>((0,n.Qi)("data-v-359ece0d"),e=e(),(0,n.jt)(),e),g=u+"#ic_arrow_hor",b={class:"page_container inner_page_container send"},y={class:"cont"},R={class:"head"},h=f((()=>(0,n.Lk)("svg",{class:"icon"},[(0,n.Lk)("use",{"xlink:href":g})],-1))),x={class:"page_title"},L={class:"token_wrap"},w={class:"token"},A={class:"logo"},C=["src","alt"],F={class:"denom"},$={class:"amount"},T={class:"val"},N={class:"cost"},S={class:"address"},K={class:"field_label"},q={class:"field"},Q={class:"amount_field"},W={class:"field_label"},E={class:"cost"},X={class:"field"},B={class:"memo_field"},M={class:"field_label"},I={class:"field"},J={class:"btns"};var D={__name:"Send",setup(e){const a=(0,r.o)(),t=(0,i.rd)(),u=(0,i.lq)(),f=(0,n.WQ)("emitter"),g=(0,n.WQ)("i18n"),D=(0,c.hN)(),U=(0,o.KR)(a.balances.find((e=>e.denom===u.query.denom))),O=(0,o.KR)(null),V=(0,o.KR)(u.query.address||""),j=(0,o.KR)(u.query.amount||""),H=(0,o.KR)(""),P=(0,o.KR)(!1),Y=(0,o.KR)([]),z=(0,o.KR)(!1),G=(0,o.KR)(!1),Z=(0,o.KR)((0,n.EW)((()=>G.value&&ee())));function ee(){try{let{prefix:e,data:t}=(0,d.fromBech32)(V.value);if(e==U.value.chain_info.bech32_prefix&&t.length==a.networks[a.currentNetwork].address_length)return O.value.classList.remove("error"),!0}catch(e){return O.value.classList.add("error"),!1}}function ae(){G.value=!1,setTimeout((()=>{j.value=(0,v.NJ)(U.value.amount,U.value.exponent),G.value=!0}))}function te(){G.value=!1,setTimeout((()=>{j.value.length&&j.value<=0&&(j.value=""),j.value.length&&j.value>0&&j.value<(0,v.NJ)(U.value.amount,U.value.exponent)&&(G.value=!0),j.value>(0,v.NJ)(U.value.amount,U.value.exponent)&&ae()}))}async function ne(){z.value=!0;try{a.TxFee.isRemember&&await a.updateTxFeeInfo();let e=await(0,v.qS)(Y.value,H.value);D.notify({group:"default",clean:!0}),D.notify({group:"default",speed:200,duration:-100,title:g.global.t("message.notification_tx_pending_title"),type:"pending",data:{isCollapsible:!0,explorer_link:(0,v.aS)(a.currentNetwork)}}),(0,v.nw)(e).catch((e=>{console.log(e),le(e)})),a.checkTxResult(),t.push("/account")}catch(e){console.log(e),le(e)}}function le(e){z.value=!1;let t="";t=e.code?g.global.t(`message.notification_tx_error_${e.code}`):g.global.t("message.notification_tx_error_rejected"),D.notify({group:"default",clean:!0}),D.notify({group:"default",speed:200,duration:6e3,title:g.global.t("message.notification_tx_error_title"),text:t,type:"error"}),a.networks[a.currentNetwork].currentTxHash=null,a.resetTxFee()}function oe(){P.value=!0,a.isAnyModalOpen=!0}return(0,n.sV)((()=>{V.value&&ee(),j.value&&te()})),(0,n.hi)((()=>{f.off("auth"),f.off("close_any_modal"),f.off("close_sign_tx_modal")})),(0,n.wB)((0,n.EW)((()=>u.query.data)),(()=>{if(u.query.denom&&(U.value=a.balances.find((e=>e.denom===u.query.denom))),u.query.data){let e=u.query.data.split("|");"send"===e[0]&&(V.value=e[1],j.value=e[2]),V.value&&ee(),j.value&&te()}})),(0,n.wB)((0,n.EW)((()=>Z.value)),(()=>{Z.value&&(Y.value=[{typeUrl:"/cosmos.bank.v1beta1.MsgSend",value:{fromAddress:a.currentAddress,toAddress:V.value,amount:[{denom:U.value.denom,amount:""+parseFloat(j.value.toString().replace(",",".")).toFixed(U.value.exponent)*Math.pow(10,U.value.exponent)}]}}])})),f.on("auth",(()=>{P.value=!1,a.isAnyModalOpen=!1,ne()})),f.on("close_sign_tx_modal",(()=>{P.value=!1,a.isAnyModalOpen=!1})),f.on("close_any_modal",(()=>{P.value=!1,a.isAnyModalOpen=!1})),(e,t)=>{const u=(0,n.g2)("router-link");return(0,n.uX)(),(0,n.CE)(n.FK,null,[(0,n.Lk)("section",b,[z.value?((0,n.uX)(),(0,n.Wv)(_.A,{key:0})):(0,n.Q3)("",!0),(0,n.Lk)("div",y,[(0,n.Lk)("div",R,[(0,n.bF)(u,{to:"/account",class:"back_btn"},{default:(0,n.k6)((()=>[h])),_:1}),(0,n.Lk)("div",x,(0,l.v_)(e.$t("message.send_page_title")),1)]),(0,n.Lk)("div",L,[(0,n.Lk)("div",w,[(0,n.Lk)("div",A,[(0,n.Lk)("img",{src:U.value.token_info.logo_URIs.svg,alt:U.value.token_info.name,loading:"lazy"},null,8,C)]),(0,n.Lk)("div",F,(0,l.v_)(U.value.token_info.symbol),1),(0,n.Lk)("div",$,[(0,n.Lk)("div",T,(0,l.v_)((0,o.R1)(v.NJ)(U.value.amount,U.value.exponent).toLocaleString("ru-RU",{maximumFractionDigits:7}).replace(",",".")),1),(0,n.Lk)("div",N,(0,l.v_)((0,o.R1)(v.ST)((0,o.R1)(v.Y$)(U.value.token_info.symbol,U.value.amount,U.value.exponent)))+" "+(0,l.v_)((0,o.R1)(a).currentCurrencySymbol),1)])])]),(0,n.Lk)("div",S,[(0,n.Lk)("div",K,(0,l.v_)(e.$t("message.send_address_label")),1),(0,n.Lk)("div",q,[(0,n.bo)((0,n.Lk)("input",{type:"text",class:"input big","onUpdate:modelValue":t[0]||(t[0]=e=>V.value=e),ref_key:"addressInput",ref:O,onFocus:t[1]||(t[1]=e=>(0,o.R1)(f).emit("show_keyboard")),onBlur:t[2]||(t[2]=e=>(0,o.R1)(f).emit("hide_keyboard")),onInput:t[3]||(t[3]=e=>ee()),onPaste:t[4]||(t[4]=e=>ee())},null,544),[[s.Jo,V.value]]),(0,n.bF)(p.A,{class:"in_field"})])]),(0,n.Lk)("div",Q,[(0,n.Lk)("div",W,[(0,n.eW)((0,l.v_)(e.$t("message.send_amount_label"))+" ",1),(0,n.Lk)("div",E,(0,l.v_)((0,o.R1)(v.ST)((0,o.R1)(v.Y$)((0,o.R1)(a).networks[(0,o.R1)(a).currentNetwork].token_name,j.value*Math.pow(10,(0,o.R1)(a).networks[(0,o.R1)(a).currentNetwork].exponent),(0,o.R1)(a).networks[(0,o.R1)(a).currentNetwork].exponent)))+" "+(0,l.v_)((0,o.R1)(a).currentCurrencySymbol),1)]),(0,n.Lk)("div",X,[(0,n.bo)((0,n.Lk)("input",{type:"number",inputmode:"numeric",class:"input big","onUpdate:modelValue":t[5]||(t[5]=e=>j.value=e),placeholder:"0.00",onFocus:t[6]||(t[6]=e=>(0,o.R1)(f).emit("show_keyboard",e.target)),onBlur:t[7]||(t[7]=e=>(0,o.R1)(f).emit("hide_keyboard")),onInput:t[8]||(t[8]=e=>te())},null,544),[[s.Jo,j.value]]),(0,n.Lk)("button",{type:"button",class:"max_btn",onClick:(0,s.D$)(ae,["prevent"])},(0,l.v_)(e.$t("message.btn_MAX")),1)])]),(0,n.Lk)("div",B,[(0,n.Lk)("div",M,(0,l.v_)(e.$t("message.memo_label")),1),(0,n.Lk)("div",I,[(0,n.bo)((0,n.Lk)("input",{type:"text",class:"input big","onUpdate:modelValue":t[9]||(t[9]=e=>H.value=e),onFocus:t[10]||(t[10]=e=>(0,o.R1)(f).emit("show_keyboard",e.target)),onBlur:t[11]||(t[11]=e=>(0,o.R1)(f).emit("hide_keyboard"))},null,544),[[s.Jo,H.value]])])]),Z.value?((0,n.uX)(),(0,n.Wv)(m.A,{key:0,msgAny:Y.value,txType:"send"},null,8,["msgAny"])):(0,n.Q3)("",!0),(0,n.Lk)("div",J,[(0,o.R1)(a).networks[(0,o.R1)(a).currentNetwork].currentTxHash?((0,n.uX)(),(0,n.CE)("button",{key:1,class:"btn waiting_btn",onClick:t[13]||(t[13]=(0,s.D$)((e=>(0,o.R1)(f).emit("show_collapsible_notification")),["prevent"]))},[(0,n.Lk)("span",null,(0,l.v_)(e.$t("message.btn_waiting_tx")),1)])):((0,n.uX)(),(0,n.CE)("button",{key:0,class:(0,l.C4)(["btn",{disabled:!(0,o.R1)(a).TxFee.isEnough}]),onClick:t[12]||(t[12]=(0,s.D$)((e=>oe()),["prevent"]))},[(0,n.Lk)("span",null,(0,l.v_)(e.$t("message.btn_send")),1)],2))])])]),(0,n.bF)(s.eB,{name:"modal"},{default:(0,n.k6)((()=>[P.value?((0,n.uX)(),(0,n.Wv)(k.A,{key:0})):(0,n.Q3)("",!0)])),_:1}),(0,n.bF)(s.eB,{name:"fade"},{default:(0,n.k6)((()=>[P.value?((0,n.uX)(),(0,n.CE)("div",{key:0,class:"modal_overlay",onClick:t[14]||(t[14]=(0,s.D$)((e=>(0,o.R1)(f).emit("close_any_modal")),["prevent"]))})):(0,n.Q3)("",!0)])),_:1})],64)}}},U=t(71241);const O=(0,U.A)(D,[["__scopeId","data-v-359ece0d"]]);var V=O}}]);
//# sourceMappingURL=778.5f31abd9.js.map