"use strict";(self["webpackChunkcosmos_telegram_signer"]=self["webpackChunkcosmos_telegram_signer"]||[]).push([[827],{69500:function(e,a,t){t.d(a,{A:function(){return W}});var s=t(56768),l=t(24232),n=t(45130),i=t(90144),o=t(24113),u=t(76750),c=t(61981);const r=e=>((0,s.Qi)("data-v-74f2c6c5"),e=e(),(0,s.jt)(),e),v=o+"#ic_biometric_face",d=o+"#ic_biometric_finger",m={class:"pin"},_={class:"label"},k={class:"field"},g={class:"field"},b=["disabled"],p={class:"field"},x=["disabled"],L={class:"field"},R=["disabled"],T={class:"field"},f=["disabled"],h={class:"field"},F=["disabled"],y={key:0,class:"warning"},C={key:0,class:"icon"},A=r((()=>(0,s.Lk)("use",{"xlink:href":v},null,-1))),$=[A],w={key:1,class:"icon"},E=r((()=>(0,s.Lk)("use",{"xlink:href":d},null,-1))),D=[E],K={class:"btns"},G={key:0},S={key:1};var j={__name:"Auth",setup(e){const a=(0,u.o)(),t=(0,s.WQ)("emitter"),o=(0,i.KR)(["","","","","",""]),r=(0,i.KR)(""),v=(0,i.KR)(""),d=(0,i.KR)(!1),A=(0,i.KR)(a.authErrorLimit),E=(0,i.KR)(!1),j=(0,i.KR)(!1),U=(0,i.KR)("finger");function X(e,a){e.target.value.length>=1&&a<6&&e.target.closest(".row").querySelector(`.field:nth-child(${a+1}) input`).focus()}function W(e,a){setTimeout((()=>{0===e.target.value.length&&a>0&&e.target.closest(".row").querySelector(`.field:nth-child(${a}) input`).select()}))}function Q(){Telegram.WebApp.isAccessGranted?I():Telegram.WebApp.BiometricManager.requestAccess({reason:"Наш текст"},(()=>I()))}function I(){Telegram.WebApp.BiometricManager.authenticate({reason:"Наш текст"},(e=>{e&&t.emit("auth")}))}async function B(){let e=await J();e?(A.value=a.authErrorLimit,t.emit("auth")):await P()}async function J(){let e=await(0,c.mK)(o.value.join(""),v.value);return e===r.value}async function P(){d.value=!0;let e=A.value-1;A.value=e,a.isAuthorized?e||t.emit("show_error_sign_tx_modal"):e?a.updateUserAuthErrorLimit(e):t.emit("show_error_auth_modal"),o.value=["","","","","",""],d.value=!1}(0,s.KC)((async()=>{let e=await a.getMultipleData(["pin","hmacKey","authErrorLimit","isBiometric"]);r.value=e.pin,v.value=e.hmacKey,A.value=e.authErrorLimit,E.value=e.isBiometric,j.value=Telegram.WebApp.BiometricManager.isBiometricAvailable,"unknown"!=Telegram.WebApp.BiometricManager.biometricType&&(U.value=Telegram.WebApp.BiometricManager.biometricType),j.value&&E.value&&Q()})),(0,s.wB)(o.value,(()=>{o.value[5].length&&document.activeElement.blur(),o.value[5].length&&A.value===a.authErrorLimit&&B()}));const M=(0,s.EW)((()=>""!=o.value[5].length));return(e,t)=>((0,s.uX)(),(0,s.CE)(s.FK,null,[(0,s.Lk)("div",m,[(0,s.Lk)("div",_,(0,l.v_)(e.$t("message.auth_enter_pin_label")),1),(0,s.Lk)("div",{class:(0,l.C4)(["row",{error:d.value}])},[(0,s.Lk)("div",k,[(0,s.bo)((0,s.Lk)("input",{type:"password",class:(0,l.C4)(["input big",{active:o.value[0].length}]),"onUpdate:modelValue":t[0]||(t[0]=e=>o.value[0]=e),maxlength:"1",inputmode:"numeric",ref:"inputRef",onInput:t[1]||(t[1]=e=>X(e,1)),onKeydown:t[2]||(t[2]=(0,n.jR)((e=>W(e,0)),["backspace"]))},null,34),[[n.Jo,o.value[0]]])]),(0,s.Lk)("div",g,[(0,s.bo)((0,s.Lk)("input",{type:"password",class:(0,l.C4)(["input big",{active:o.value[1].length}]),"onUpdate:modelValue":t[3]||(t[3]=e=>o.value[1]=e),maxlength:"1",inputmode:"numeric",disabled:!o.value[0].length,onInput:t[4]||(t[4]=e=>X(e,2)),onKeydown:t[5]||(t[5]=(0,n.jR)((e=>W(e,1)),["backspace"]))},null,42,b),[[n.Jo,o.value[1]]])]),(0,s.Lk)("div",p,[(0,s.bo)((0,s.Lk)("input",{type:"password",class:(0,l.C4)(["input big",{active:o.value[2].length}]),"onUpdate:modelValue":t[6]||(t[6]=e=>o.value[2]=e),maxlength:"1",inputmode:"numeric",disabled:!o.value[1].length,onInput:t[7]||(t[7]=e=>X(e,3)),onKeydown:t[8]||(t[8]=(0,n.jR)((e=>W(e,2)),["backspace"]))},null,42,x),[[n.Jo,o.value[2]]])]),(0,s.Lk)("div",L,[(0,s.bo)((0,s.Lk)("input",{type:"password",class:(0,l.C4)(["input big",{active:o.value[3].length}]),"onUpdate:modelValue":t[9]||(t[9]=e=>o.value[3]=e),maxlength:"1",inputmode:"numeric",disabled:!o.value[2].length,onInput:t[10]||(t[10]=e=>X(e,4)),onKeydown:t[11]||(t[11]=(0,n.jR)((e=>W(e,3)),["backspace"]))},null,42,R),[[n.Jo,o.value[3]]])]),(0,s.Lk)("div",T,[(0,s.bo)((0,s.Lk)("input",{type:"password",class:(0,l.C4)(["input big",{active:o.value[4].length}]),"onUpdate:modelValue":t[12]||(t[12]=e=>o.value[4]=e),maxlength:"1",inputmode:"numeric",disabled:!o.value[3].length,onInput:t[13]||(t[13]=e=>X(e,5)),onKeydown:t[14]||(t[14]=(0,n.jR)((e=>W(e,4)),["backspace"]))},null,42,f),[[n.Jo,o.value[4]]])]),(0,s.Lk)("div",h,[(0,s.bo)((0,s.Lk)("input",{type:"password",class:(0,l.C4)(["input big",{active:o.value[5].length}]),"onUpdate:modelValue":t[15]||(t[15]=e=>o.value[5]=e),maxlength:"1",inputmode:"numeric",disabled:!o.value[4].length,onInput:t[16]||(t[16]=e=>X(e,6)),onKeydown:t[17]||(t[17]=(0,n.jR)((e=>W(e,5)),["backspace"]))},null,42,F),[[n.Jo,o.value[5]]])])],2),A.value<(0,i.R1)(a).authErrorLimit?((0,s.uX)(),(0,s.CE)("div",y,(0,l.v_)(e.$t("message.auth_error_warning",{count:A.value})),1)):(0,s.Q3)("",!0)]),j.value&&A.value==(0,i.R1)(a).authErrorLimit?((0,s.uX)(),(0,s.CE)("button",{key:0,class:"biometric_btn",onClick:(0,n.D$)(Q,["prevent"])},[(0,s.Lk)("span",null,(0,l.v_)(e.$t("message.btn_biometric2")),1),"face"===e.biometrictype?((0,s.uX)(),(0,s.CE)("svg",C,$)):((0,s.uX)(),(0,s.CE)("svg",w,D))])):(0,s.Q3)("",!0),(0,s.Lk)("div",K,[A.value<(0,i.R1)(a).authErrorLimit?((0,s.uX)(),(0,s.CE)("button",{key:0,class:(0,l.C4)(["btn",{disabled:!M.value}]),onClick:t[18]||(t[18]=(0,n.D$)((e=>B()),["prevent"]))},[(0,i.R1)(a).isAuthorized?((0,s.uX)(),(0,s.CE)("span",G,(0,l.v_)(e.$t("message.btn_sign")),1)):((0,s.uX)(),(0,s.CE)("span",S,(0,l.v_)(e.$t("message.btn_login")),1))],2)):(0,s.Q3)("",!0)])],64))}},U=t(71241);const X=(0,U.A)(j,[["__scopeId","data-v-74f2c6c5"]]);var W=X},89114:function(e,a,t){t.d(a,{A:function(){return v}});var s=t(56768);const l={class:"loader_wrap"},n=(0,s.Lk)("div",{class:"loader"},[(0,s.Lk)("span")],-1),i=[n];function o(e,a){return(0,s.uX)(),(0,s.CE)("div",l,i)}var u=t(71241);const c={},r=(0,u.A)(c,[["render",o]]);var v=r},88564:function(e,a,t){t.d(a,{A:function(){return se}});var s=t(56768),l=t(24232),n=t(90144),i=t(45130),o=t(76750),u=t(61981),c=t(24113);const r=e=>((0,s.Qi)("data-v-9477a4e2"),e=e(),(0,s.jt)(),e),v=c+"#ic_close",d=c+"#ic_check",m={class:"modal"},_={class:"modal_content"},k={class:"data"},g=r((()=>(0,s.Lk)("svg",{class:"icon"},[(0,s.Lk)("use",{"xlink:href":v})],-1))),b=[g],p={class:"modal_title"},x={class:"fee_tier"},L={class:"label"},R=r((()=>(0,s.Lk)("div",{class:"toggle_wrap"},[(0,s.Lk)("div",{class:"toggle"},[(0,s.Lk)("div",{class:"ball_wrap"},[(0,s.Lk)("div",{class:"ball"},[(0,s.Lk)("svg",null,[(0,s.Lk)("use",{"xlink:href":d})])])])])],-1))),T={class:"vals_wrap"},f={class:"vals"},h={class:"name"},F={class:"cost"},y={class:"amount"},C={class:"denom"},A={class:"name"},$={class:"cost"},w={class:"amount"},E={class:"denom"},D={class:"name"},K={class:"cost"},G={class:"amount"},S={class:"denom"},j={class:"fee_token"},U={class:"label"},X={class:"field"},W=["value"],Q={class:"gas_adjustment"},I={class:"label"},B={key:0},J={key:1},P=(0,s.Fv)('<div class="toggle_wrap" data-v-9477a4e2><div class="toggle" data-v-9477a4e2><div class="ball_wrap" data-v-9477a4e2><div class="ball" data-v-9477a4e2><svg data-v-9477a4e2><use xlink:href="'+d+'" data-v-9477a4e2></use></svg></div></div></div></div>',1),M={key:0,class:"field"},V=["value"],N={key:1,class:"field"},Y={class:"btns"};var q={__name:"TxFeeModal",setup(e){const a=(0,o.o)(),t=(0,s.WQ)("emitter");function c(e){e.target.value<=0&&(a.TxFee.userGasAmount=a.TxFee.gasAmount)}return(0,s.wB)((0,s.EW)((()=>a.TxFee.isGasAdjustmentAuto)),(()=>{a.TxFee.userGasAmount=a.TxFee.gasAmount})),(0,s.wB)((0,s.EW)((()=>a.TxFee.userGasAmount)),(()=>{a.TxFeeIsEnough()})),(e,o)=>((0,s.uX)(),(0,s.CE)("section",m,[(0,s.Lk)("div",_,[(0,s.Lk)("div",k,[(0,s.Lk)("button",{class:"close_btn",onClick:o[0]||(o[0]=(0,i.D$)((e=>(0,n.R1)(t).emit("close_tx_fee_modal")),["prevent"]))},b),(0,s.Lk)("div",p,(0,l.v_)(e.$t("message.tx_fee_modal_title")),1),(0,s.Lk)("div",x,[(0,s.Lk)("div",L,[(0,s.Lk)("span",null,(0,l.v_)(e.$t("message.tx_fee_fee_tier_label")),1),(0,s.Lk)("button",{class:(0,l.C4)(["toggle_btn",{enabled:(0,n.R1)(a).TxFee.isRemember}]),onClick:o[1]||(o[1]=(0,i.D$)((e=>(0,n.R1)(a).TxFee.isRemember=!(0,n.R1)(a).TxFee.isRemember),["prevent"]))},[(0,s.Lk)("span",null,(0,l.v_)(e.$t("message.tx_fee_remember_label")),1),R],2)]),(0,s.Lk)("div",T,[(0,s.Lk)("div",f,[(0,s.Lk)("button",{class:(0,l.C4)(["btn",{active:"low"===(0,n.R1)(a).TxFee.currentLevel}]),onClick:o[2]||(o[2]=(0,i.D$)((e=>(0,n.R1)(a).TxFee.currentLevel="low"),["prevent"]))},[(0,s.Lk)("div",h,(0,l.v_)(e.$t("message.tx_fee_low_label")),1),(0,s.Lk)("div",F," ~ "+(0,l.v_)((0,n.R1)(u.ST)((0,n.R1)(u.Y$)((0,n.R1)(a).TxFee.balance.token_info.symbol,(0,n.R1)(a).TxFee.userGasAmount*(0,n.R1)(a).TxFee.lowPrice,(0,n.R1)(a).TxFee.balance.exponent,"USD"),"USD"))+"$ ",1),(0,s.Lk)("div",y,(0,l.v_)((0,n.R1)(u.NJ)((0,n.R1)(a).TxFee.userGasAmount*(0,n.R1)(a).TxFee.lowPrice,(0,n.R1)(a).TxFee.balance.exponent).toLocaleString("ru-RU",{maximumFractionDigits:5})),1),(0,s.Lk)("div",C,(0,l.v_)((0,n.R1)(a).TxFee.balance.token_info.symbol),1)],2),(0,s.Lk)("button",{class:(0,l.C4)(["btn",{active:"average"===(0,n.R1)(a).TxFee.currentLevel}]),onClick:o[3]||(o[3]=(0,i.D$)((e=>(0,n.R1)(a).TxFee.currentLevel="average"),["prevent"]))},[(0,s.Lk)("div",A,(0,l.v_)(e.$t("message.tx_fee_average_label")),1),(0,s.Lk)("div",$," ~ "+(0,l.v_)((0,n.R1)(u.ST)((0,n.R1)(u.Y$)((0,n.R1)(a).TxFee.balance.token_info.symbol,(0,n.R1)(a).TxFee.userGasAmount*(0,n.R1)(a).TxFee.averagePrice,(0,n.R1)(a).TxFee.balance.exponent,"USD"),"USD"))+"$ ",1),(0,s.Lk)("div",w,(0,l.v_)((0,n.R1)(u.NJ)((0,n.R1)(a).TxFee.userGasAmount*(0,n.R1)(a).TxFee.averagePrice,(0,n.R1)(a).TxFee.balance.exponent).toLocaleString("ru-RU",{maximumFractionDigits:5})),1),(0,s.Lk)("div",E,(0,l.v_)((0,n.R1)(a).TxFee.balance.token_info.symbol),1)],2),(0,s.Lk)("button",{class:(0,l.C4)(["btn",{active:"high"===(0,n.R1)(a).TxFee.currentLevel}]),onClick:o[4]||(o[4]=(0,i.D$)((e=>(0,n.R1)(a).TxFee.currentLevel="high"),["prevent"]))},[(0,s.Lk)("div",D,(0,l.v_)(e.$t("message.tx_fee_high_label")),1),(0,s.Lk)("div",K," ~ "+(0,l.v_)((0,n.R1)(u.ST)((0,n.R1)(u.Y$)((0,n.R1)(a).TxFee.balance.token_info.symbol,(0,n.R1)(a).TxFee.userGasAmount*(0,n.R1)(a).TxFee.highPrice,(0,n.R1)(a).TxFee.balance.exponent,"USD"),"USD"))+"$ ",1),(0,s.Lk)("div",G,(0,l.v_)((0,n.R1)(u.NJ)((0,n.R1)(a).TxFee.userGasAmount*(0,n.R1)(a).TxFee.highPrice,(0,n.R1)(a).TxFee.balance.exponent).toLocaleString("ru-RU",{maximumFractionDigits:5})),1),(0,s.Lk)("div",S,(0,l.v_)((0,n.R1)(a).TxFee.balance.token_info.symbol),1)],2)])])]),(0,s.Lk)("div",j,[(0,s.Lk)("div",U,(0,l.v_)(e.$t("message.tx_fee_fee_token_label")),1),(0,s.Lk)("div",X,[(0,s.Lk)("input",{type:"text",class:"input big",value:(0,n.R1)(a).TxFee.balance.token_info.symbol,readonly:""},null,8,W)])]),(0,s.Lk)("div",Q,[(0,s.Lk)("div",I,[(0,n.R1)(a).TxFee.isGasAdjustmentAuto?((0,s.uX)(),(0,s.CE)("span",B,(0,l.v_)(e.$t("message.tx_fee_gas_adjustment_label")),1)):((0,s.uX)(),(0,s.CE)("span",J,(0,l.v_)(e.$t("message.tx_fee_gas_amount_label")),1)),(0,s.Lk)("button",{class:(0,l.C4)(["toggle_btn",{enabled:(0,n.R1)(a).TxFee.isGasAdjustmentAuto}]),onClick:o[5]||(o[5]=(0,i.D$)((e=>(0,n.R1)(a).TxFee.isGasAdjustmentAuto=!(0,n.R1)(a).TxFee.isGasAdjustmentAuto),["prevent"]))},[(0,s.Lk)("span",null,(0,l.v_)(e.$t("message.tx_fee_auto_label")),1),P],2)]),(0,n.R1)(a).TxFee.isGasAdjustmentAuto?((0,s.uX)(),(0,s.CE)("div",M,[(0,s.Lk)("input",{type:"number",class:"input big",value:(0,n.R1)(a).networks[(0,n.R1)(a).TxFee.balance.chain_name].gas_adjustment,disabled:""},null,8,V)])):((0,s.uX)(),(0,s.CE)("div",N,[(0,s.bo)((0,s.Lk)("input",{type:"number",inputmode:"numeric",class:"input big","onUpdate:modelValue":o[6]||(o[6]=e=>(0,n.R1)(a).TxFee.userGasAmount=e),maxlength:"10",onInput:o[7]||(o[7]=e=>c(e))},null,544),[[i.Jo,(0,n.R1)(a).TxFee.userGasAmount]])]))]),(0,s.Lk)("div",Y,[(0,s.Lk)("button",{class:"btn",onClick:o[8]||(o[8]=(0,i.D$)((e=>(0,n.R1)(t).emit("close_tx_fee_modal")),["prevent"]))},[(0,s.Lk)("span",null,(0,l.v_)(e.$t("message.btn_close")),1)])])])]),(0,s.Lk)("div",{class:"overlay",onClick:o[9]||(o[9]=(0,i.D$)((e=>(0,n.R1)(t).emit("close_tx_fee_modal")),["prevent"]))})]))}},z=t(71241);const H=(0,z.A)(q,[["__scopeId","data-v-9477a4e2"]]);var O=H;const Z={class:"tx_fee"},ee={class:"cost"};var ae={__name:"TxFee",props:["msgAny"],setup(e){const a=e,t=(0,o.o)(),c=(0,s.WQ)("emitter"),r=(0,n.KR)(!1),v=(0,s.EW)((()=>(0,u.NJ)(t.TxFee.userGasAmount*t.TxFee[`${t.TxFee.currentLevel}Price`],t.TxFee.balance.exponent)));return(0,s.KC)((async()=>{t.TxFeeGetCurrentBalance(t.networks[t.currentNetwork].denom),t.TxFeeSetGasPrices(),await(0,u.jC)(a.msgAny),t.TxFeeIsEnough()})),c.on("close_tx_fee_modal",(()=>{r.value=!1})),(e,a)=>((0,s.uX)(),(0,s.CE)(s.FK,null,[(0,s.Lk)("div",Z,[(0,s.Lk)("button",{class:(0,l.C4)(["btn",{red:!(0,n.R1)(t).TxFee.isEnough}]),onClick:a[0]||(a[0]=(0,i.D$)((e=>r.value=!0),["prevent"]))},[(0,s.eW)((0,l.v_)(e.$t("message.tx_fee_label"))+" "+(0,l.v_)(v.value.toLocaleString("ru-RU",{maximumFractionDigits:5}))+" "+(0,l.v_)((0,n.R1)(t).TxFee.balance.token_info.symbol)+" ",1),(0,s.Lk)("div",ee," (~ "+(0,l.v_)((0,n.R1)(u.ST)((0,n.R1)(u.Y$)((0,n.R1)(t).TxFee.balance.token_info.symbol,(0,n.R1)(t).TxFee.userGasAmount*(0,n.R1)(t).TxFee[`${(0,n.R1)(t).TxFee.currentLevel}Price`],(0,n.R1)(t).TxFee.balance.exponent,"USD"),"USD"))+"$) ",1)],2)]),r.value?((0,s.uX)(),(0,s.Wv)(O,{key:0})):(0,s.Q3)("",!0)],64))}};const te=(0,z.A)(ae,[["__scopeId","data-v-169ef6a0"]]);var se=te},1955:function(e,a,t){t.d(a,{A:function(){return K}});var s=t(56768),l=t(45130),n=t(90144),i=t(24232),o=t(24113),u=t(69500);const c=o+"#ic_close",r={class:"modal"},v={class:"modal_content"},d={class:"data"},m=(0,s.Lk)("svg",{class:"icon"},[(0,s.Lk)("use",{"xlink:href":c})],-1),_=[m],k={class:"modal_title"},g={class:"modal_desc"},b={class:"btns"};var p={__name:"SignTxErrorModal",setup(e){const a=(0,s.WQ)("emitter");return(e,t)=>((0,s.uX)(),(0,s.CE)("section",r,[(0,s.Lk)("div",v,[(0,s.Lk)("div",d,[(0,s.Lk)("button",{class:"close_btn",onClick:t[0]||(t[0]=(0,l.D$)((e=>(0,n.R1)(a).emit("close_sign_tx_modal")),["prevent"]))},_),(0,s.Lk)("div",k,(0,i.v_)(e.$t("message.sign_tx_error_title")),1),(0,s.Lk)("div",g,(0,i.v_)(e.$t("message.sign_tx_error_desc")),1),(0,s.Lk)("div",b,[(0,s.Lk)("button",{class:"btn",onClick:t[1]||(t[1]=(0,l.D$)((e=>(0,n.R1)(a).emit("close_sign_tx_modal")),["prevent"]))},[(0,s.Lk)("span",null,(0,i.v_)(e.$t("message.btn_understood")),1)])])])]),(0,s.Lk)("div",{class:"overlay",onClick:t[2]||(t[2]=(0,l.D$)((e=>(0,n.R1)(a).emit("close_sign_tx_modal")),["prevent"]))})]))}};const x=p;var L=x;const R=e=>((0,s.Qi)("data-v-74eea8a0"),e=e(),(0,s.jt)(),e),T=o+"#ic_close",f={key:0,class:"modal"},h={class:"modal_content"},F={class:"data"},y=R((()=>(0,s.Lk)("svg",{class:"icon"},[(0,s.Lk)("use",{"xlink:href":T})],-1))),C=[y],A={class:"modal_title"},$={class:"auth_wrap"};var w={__name:"SignTx",setup(e){const a=(0,s.WQ)("emitter"),t=(0,n.KR)(!1);return a.on("show_error_sign_tx_modal",(()=>t.value=!0)),(e,o)=>((0,s.uX)(),(0,s.CE)(s.FK,null,[t.value?(0,s.Q3)("",!0):((0,s.uX)(),(0,s.CE)("section",f,[(0,s.Lk)("div",h,[(0,s.Lk)("div",F,[(0,s.Lk)("button",{class:"close_btn",onClick:o[0]||(o[0]=(0,l.D$)((e=>(0,n.R1)(a).emit("close_sign_tx_modal")),["prevent"]))},C),(0,s.Lk)("div",A,(0,i.v_)(e.$t("message.sign_tx_title")),1),(0,s.Lk)("div",$,[(0,s.bF)(u.A)])])]),(0,s.Lk)("div",{class:"overlay",onClick:o[1]||(o[1]=(0,l.D$)((e=>(0,n.R1)(a).emit("close_sign_tx_modal")),["prevent"]))})])),t.value?((0,s.uX)(),(0,s.Wv)(L,{key:1})):(0,s.Q3)("",!0)],64))}},E=t(71241);const D=(0,E.A)(w,[["__scopeId","data-v-74eea8a0"]]);var K=D}}]);
//# sourceMappingURL=827.42353f41.js.map