"use strict";(self["webpackChunkcosmos_telegram_signer"]=self["webpackChunkcosmos_telegram_signer"]||[]).push([[864],{83387:function(e,t,s){s.r(t),s.d(t,{default:function(){return j}});s(44114);var a=s(56768),n=s(24232),l=s(90144),o=s(45130),i=s(54055),u=s(81387),c=s(67278),d=s(61981),r=s(17086),_=s(50358),p=s(86255);const k={class:"page_container send_tx"},g={class:"cont"},m={class:"page_title"},f={class:"page_data_wrap"},v={class:"page_data"},h={class:"memo_field"},b={class:"field_label"},R={class:"field"},y={class:"btns"};var x={__name:"SendTx",setup(e){const t=(0,i.o)(),s=(0,u.rd)(),x=(0,a.WQ)("emitter"),q=(0,c.hN)(),w=(0,a.WQ)("i18n"),j=(0,l.KR)(""),C=(0,l.KR)(!1),L=(0,l.KR)(!1);async function P(){C.value=!0;try{t.TxFee.isRemember&&await t.updateTxFeeInfo();let e=await(0,d.qS)(t.jetPackRequest.data.msg,j.value);q.notify({group:"default",clean:!0}),q.notify({group:"default",speed:200,duration:-100,title:w.global.t("message.notification_tx_pending_title"),type:"pending",data:{isCollapsible:!0,explorer_link:(0,d.aS)(t.currentNetwork)}}),console.log(e),(0,d.nw)(e).catch((e=>{if(console.log(e),t.jetPackRequest=null,t.showRedirectModal=!0,q.notify({group:"default",speed:200,duration:4e3,title:w.global.t("message.notification_tx_success_title"),type:"success",data:{explorer_link:(0,d.aS)(this.currentNetwork)}}),this.jetPackRequest){const e=this.RTCConnections[this.jetPackRequest.data.peer_id];e&&e.send({type:"tx",requestId:this.jetPackRequest.data.request_id,status:"success",hash:this.networks[this.currentNetwork].currentTxHash})}})),s.push("/account")}catch(e){if(console.log(e),t.jetPackRequest=null,t.showRedirectModal=!0,q.notify({group:"default",speed:200,duration:4e3,title:w.global.t("message.notification_tx_success_title"),type:"success",data:{explorer_link:(0,d.aS)(this.currentNetwork)}}),this.jetPackRequest){const e=this.RTCConnections[this.jetPackRequest.data.peer_id];e&&e.send({type:"tx",requestId:this.jetPackRequest.data.request_id,status:"success",hash:this.networks[this.currentNetwork].currentTxHash})}}}function T(){const e=t.RTCConnections[t.jetPackRequest.data.peer_id];e&&e.send({type:"error",requestId:t.jetPackRequest.data.request_id,message:w.global.t("message.jp_message_rejected")}),t.jetPackRequest=null,q.notify({group:"default",speed:200,duration:1e3,title:w.global.t("message.notification_jp_send_reject"),type:"default"}),t.resetTxFee(),t.showRedirectModal=!0,s.push("/account")}function A(){L.value=!0,t.isAnyModalOpen=!0}return x.on("auth",(()=>{L.value=!1,t.isAnyModalOpen=!1,P()})),x.on("close_sign_tx_modal",(()=>{L.value=!1,t.isAnyModalOpen=!1})),x.on("close_any_modal",(()=>{L.value=!1,t.isAnyModalOpen=!1})),(e,s)=>((0,a.uX)(),(0,a.CE)(a.FK,null,[(0,a.Lk)("section",k,[C.value?((0,a.uX)(),(0,a.Wv)(r.A,{key:0})):(0,a.Q3)("",!0),(0,a.Lk)("div",g,[(0,a.Lk)("div",m,(0,n.v_)(e.$t("message.jp_send_tx_title")),1),(0,a.Lk)("div",f,[(0,a.Lk)("div",v,[(0,a.Lk)("pre",null,[(0,a.Lk)("code",null,(0,n.v_)((0,l.R1)(t).jetPackRequest?.data?.msg),1)]),(0,a.Lk)("div",h,[(0,a.Lk)("div",b,(0,n.v_)(e.$t("message.memo_label")),1),(0,a.Lk)("div",R,[(0,a.bo)((0,a.Lk)("input",{type:"text",class:"input big","onUpdate:modelValue":s[0]||(s[0]=e=>j.value=e)},null,512),[[o.Jo,j.value]])])]),(0,a.bF)(_.A,{msgAny:(0,l.R1)(t).jetPackRequest?.data?.msg,txType:"send"},null,8,["msgAny"]),(0,a.Lk)("div",y,[(0,l.R1)(t).networks[(0,l.R1)(t).currentNetwork].currentTxHash?((0,a.uX)(),(0,a.CE)("button",{key:1,class:"btn waiting_btn",onClick:s[2]||(s[2]=(0,o.D$)((e=>(0,l.R1)(x).emit("show_collapsible_notification")),["prevent"]))},[(0,a.Lk)("span",null,(0,n.v_)(e.$t("message.btn_waiting_tx")),1)])):((0,a.uX)(),(0,a.CE)("button",{key:0,class:(0,n.C4)(["btn",{disabled:!(0,l.R1)(t).TxFee.isEnough}]),onClick:s[1]||(s[1]=(0,o.D$)((e=>A()),["prevent"]))},[(0,a.Lk)("span",null,(0,n.v_)(e.$t("message.btn_send")),1)],2)),(0,a.Lk)("button",{class:"btn purple_btn",onClick:s[3]||(s[3]=e=>T())},[(0,a.Lk)("span",null,(0,n.v_)(e.$t("message.btn_reject")),1)])])])])])]),(0,a.bF)(o.eB,{name:"modal"},{default:(0,a.k6)((()=>[L.value?((0,a.uX)(),(0,a.Wv)(p.A,{key:0})):(0,a.Q3)("",!0)])),_:1}),(0,a.bF)(o.eB,{name:"fade"},{default:(0,a.k6)((()=>[L.value?((0,a.uX)(),(0,a.CE)("div",{key:0,class:"modal_overlay",onClick:s[4]||(s[4]=(0,o.D$)((e=>(0,l.R1)(x).emit("close_any_modal")),["prevent"]))})):(0,a.Q3)("",!0)])),_:1})],64))}},q=s(71241);const w=(0,q.A)(x,[["__scopeId","data-v-fd0b3ffa"]]);var j=w}}]);
//# sourceMappingURL=864.6b6632bb.js.map