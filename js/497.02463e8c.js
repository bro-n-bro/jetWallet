"use strict";(self["webpackChunkcosmos_telegram_signer"]=self["webpackChunkcosmos_telegram_signer"]||[]).push([[497],{50151:function(e,a,t){t.d(a,{A:function(){return Q}});var n=t(56768),l=t(24232),s=t(45130),i=t(90144),o=t(24113),u=t(76750),c=t(61981);const r=e=>((0,n.Qi)("data-v-7f08a64f"),e=e(),(0,n.jt)(),e),d=o+"#ic_biometric_face",v=o+"#ic_biometric_finger",m={class:"pin"},p={class:"label"},_={class:"field"},g={class:"field"},k=["disabled"],b={class:"field"},h=["disabled"],f={class:"field"},L=["disabled"],w={class:"field"},y=["disabled"],x={class:"field"},C=["disabled"],R={key:0,class:"warning"},A={key:0,class:"icon"},E=r((()=>(0,n.Lk)("use",{"xlink:href":d},null,-1))),K=[E],T={key:1,class:"icon"},$=r((()=>(0,n.Lk)("use",{"xlink:href":v},null,-1))),F=[$];var W={__name:"Auth",setup(e){const a=(0,u.o)(),t=(0,n.WQ)("emitter"),o=(0,i.KR)(["","","","","",""]),r=(0,i.KR)(""),d=(0,i.KR)(""),v=(0,i.KR)(!1),E=(0,i.KR)(!1),$=(0,i.KR)(!1),W=(0,i.KR)(!1),j=(0,i.KR)("finger");function B(e,a){e.target.value.length>=1&&a<6&&e.target.closest(".row").querySelector(`.field:nth-child(${a+1}) input`).focus()}function Q(e,a){setTimeout((()=>{0===e.target.value.length&&a>0&&e.target.closest(".row").querySelector(`.field:nth-child(${a}) input`).select()}))}function X(){Telegram.WebApp.isAccessGranted?I():Telegram.WebApp.BiometricManager.requestAccess({reason:"Наш текст"},(()=>I()))}function I(){Telegram.WebApp.BiometricManager.authenticate({reason:"Наш текст"},(e=>{e&&t.emit("auth")}))}async function J(){let e=await N();e?t.emit("auth"):await U()}async function N(){let e=await(0,c.mK)(o.value.join(""),d.value);return e===r.value}async function U(){v.value=!0;let e=E.value-1;E.value=e,e?a.updateUserAuthErrorLimit(e):t.emit("show_error_auth_modal"),o.value=["","","","","",""],v.value=!1}(0,n.KC)((async()=>{let e=await a.getMultipleData(["pin","hmacKey","authErrorLimit","isBiometric"]);r.value=e.pin,d.value=e.hmacKey,E.value=e.authErrorLimit,$.value=e.isBiometric,W.value=Telegram.WebApp.BiometricManager.isBiometricAvailable,"unknown"!=Telegram.WebApp.BiometricManager.biometricType&&(j.value=Telegram.WebApp.BiometricManager.biometricType),W.value&&$.value&&X()})),(0,n.wB)(o.value,(()=>{o.value[5].length&&document.activeElement.blur(),o.value[5].length&&E.value===a.authErrorLimit&&J()}));const D=(0,n.EW)((()=>""!=o.value[5].length));return(e,t)=>((0,n.uX)(),(0,n.CE)(n.FK,null,[(0,n.Lk)("div",m,[(0,n.Lk)("div",p,(0,l.v_)(e.$t("message.auth_enter_pin_label")),1),(0,n.Lk)("div",{class:(0,l.C4)(["row",{error:v.value}])},[(0,n.Lk)("div",_,[(0,n.bo)((0,n.Lk)("input",{type:"password",class:(0,l.C4)(["input big",{active:o.value[0].length}]),"onUpdate:modelValue":t[0]||(t[0]=e=>o.value[0]=e),maxlength:"1",inputmode:"numeric",ref:"inputRef",onInput:t[1]||(t[1]=e=>B(e,1)),onKeydown:t[2]||(t[2]=(0,s.jR)((e=>Q(e,0)),["backspace"]))},null,34),[[s.Jo,o.value[0]]])]),(0,n.Lk)("div",g,[(0,n.bo)((0,n.Lk)("input",{type:"password",class:(0,l.C4)(["input big",{active:o.value[1].length}]),"onUpdate:modelValue":t[3]||(t[3]=e=>o.value[1]=e),maxlength:"1",inputmode:"numeric",disabled:!o.value[0].length,onInput:t[4]||(t[4]=e=>B(e,2)),onKeydown:t[5]||(t[5]=(0,s.jR)((e=>Q(e,1)),["backspace"]))},null,42,k),[[s.Jo,o.value[1]]])]),(0,n.Lk)("div",b,[(0,n.bo)((0,n.Lk)("input",{type:"password",class:(0,l.C4)(["input big",{active:o.value[2].length}]),"onUpdate:modelValue":t[6]||(t[6]=e=>o.value[2]=e),maxlength:"1",inputmode:"numeric",disabled:!o.value[1].length,onInput:t[7]||(t[7]=e=>B(e,3)),onKeydown:t[8]||(t[8]=(0,s.jR)((e=>Q(e,2)),["backspace"]))},null,42,h),[[s.Jo,o.value[2]]])]),(0,n.Lk)("div",f,[(0,n.bo)((0,n.Lk)("input",{type:"password",class:(0,l.C4)(["input big",{active:o.value[3].length}]),"onUpdate:modelValue":t[9]||(t[9]=e=>o.value[3]=e),maxlength:"1",inputmode:"numeric",disabled:!o.value[2].length,onInput:t[10]||(t[10]=e=>B(e,4)),onKeydown:t[11]||(t[11]=(0,s.jR)((e=>Q(e,3)),["backspace"]))},null,42,L),[[s.Jo,o.value[3]]])]),(0,n.Lk)("div",w,[(0,n.bo)((0,n.Lk)("input",{type:"password",class:(0,l.C4)(["input big",{active:o.value[4].length}]),"onUpdate:modelValue":t[12]||(t[12]=e=>o.value[4]=e),maxlength:"1",inputmode:"numeric",disabled:!o.value[3].length,onInput:t[13]||(t[13]=e=>B(e,5)),onKeydown:t[14]||(t[14]=(0,s.jR)((e=>Q(e,4)),["backspace"]))},null,42,y),[[s.Jo,o.value[4]]])]),(0,n.Lk)("div",x,[(0,n.bo)((0,n.Lk)("input",{type:"password",class:(0,l.C4)(["input big",{active:o.value[5].length}]),"onUpdate:modelValue":t[15]||(t[15]=e=>o.value[5]=e),maxlength:"1",inputmode:"numeric",disabled:!o.value[4].length,onInput:t[16]||(t[16]=e=>B(e,6)),onKeydown:t[17]||(t[17]=(0,s.jR)((e=>Q(e,5)),["backspace"]))},null,42,C),[[s.Jo,o.value[5]]])])],2),E.value<(0,i.R1)(a).authErrorLimit?((0,n.uX)(),(0,n.CE)("div",R,(0,l.v_)(e.$t("message.auth_error_warning",{count:E.value})),1)):(0,n.Q3)("",!0)]),W.value&&E.value==(0,i.R1)(a).authErrorLimit?((0,n.uX)(),(0,n.CE)("button",{key:0,class:(0,l.C4)(["biometric_btn",{show:!e.loading}]),onClick:(0,s.D$)(X,["prevent"])},[(0,n.Lk)("span",null,(0,l.v_)(e.$t("message.btn_biometric2")),1),"face"===e.biometrictype?((0,n.uX)(),(0,n.CE)("svg",A,K)):((0,n.uX)(),(0,n.CE)("svg",T,F))],2)):(0,n.Q3)("",!0),(0,n.Lk)("div",{class:(0,l.C4)(["btns",{show:!e.loading}])},[E.value<(0,i.R1)(a).authErrorLimit?((0,n.uX)(),(0,n.CE)("button",{key:0,class:(0,l.C4)(["btn",{disabled:!D.value}]),onClick:t[18]||(t[18]=(0,s.D$)((e=>J()),["prevent"]))},[(0,n.Lk)("span",null,(0,l.v_)(e.$t("message.btn_login")),1)],2)):(0,n.Q3)("",!0)],2)],64))}},j=t(71241);const B=(0,j.A)(W,[["__scopeId","data-v-7f08a64f"]]);var Q=B},89114:function(e,a,t){t.d(a,{A:function(){return d}});var n=t(56768);const l={class:"loader_wrap"},s=(0,n.Lk)("div",{class:"loader"},[(0,n.Lk)("span")],-1),i=[s];function o(e,a){return(0,n.uX)(),(0,n.CE)("div",l,i)}var u=t(71241);const c={},r=(0,u.A)(c,[["render",o]]);var d=r},21497:function(e,a,t){t.r(a),t.d(a,{default:function(){return ae}});t(44114);var n=t(56768),l=t(24232),s=t(90144),i=t(45130),o=t(24113),u=t(76750),c=t(81387),r=t(67278),d=t(61981),v=t(89114);const m={class:"tx_fee"},p={class:"btn"},_={key:0,class:"not_enough"};var g={__name:"TxFee",setup(e){const a=(0,u.o)(),t=a.balances.find((e=>e.denom==a.networks[a.currentNetwork].denom));return(0,n.KC)((()=>{a.TxFeeSetCurrentAmount(a.networks[a.currentNetwork].chain_id),a.TxFeeSetCurrentDenom(a.networks[a.currentNetwork].denom,a.networks[a.currentNetwork].token_name),a.TxFee.isEnough=(0,d.NJ)(t.amount,t.exponent)>a.TxFee.currentAmount})),(0,n.wB)((0,n.EW)((()=>a.isBalancesGot)),(()=>{a.TxFee.isEnough=(0,d.NJ)(t.amount,t.exponent)>a.TxFee.currentAmount})),(e,t)=>((0,n.uX)(),(0,n.CE)("div",m,[(0,n.Lk)("button",p,(0,l.v_)(e.$t("message.tx_fee_label"))+" "+(0,l.v_)((0,s.R1)(a).TxFee.currentAmount)+" "+(0,l.v_)((0,s.R1)(a).TxFee.currentSymbol),1),(0,s.R1)(a).TxFee.isEnough?(0,n.Q3)("",!0):((0,n.uX)(),(0,n.CE)("div",_," Not enough balance "))]))}},k=t(71241);const b=(0,k.A)(g,[["__scopeId","data-v-85023658"]]);var h=b,f=t(50151);const L=e=>((0,n.Qi)("data-v-231bea72"),e=e(),(0,n.jt)(),e),w=o+"#ic_close",y={class:"modal"},x={class:"modal_content"},C={class:"data"},R=L((()=>(0,n.Lk)("svg",{class:"icon"},[(0,n.Lk)("use",{"xlink:href":w})],-1))),A=[R],E={class:"modal_title"},K={class:"auth_wrap"};var T={__name:"SignTx",setup(e){const a=(0,n.WQ)("emitter");return(e,t)=>((0,n.uX)(),(0,n.CE)("section",y,[(0,n.Lk)("div",x,[(0,n.Lk)("div",C,[(0,n.Lk)("button",{class:"close_btn",onClick:t[0]||(t[0]=(0,i.D$)((e=>(0,s.R1)(a).emit("close_sign_tx_modal")),["prevent"]))},A),(0,n.Lk)("div",E,(0,l.v_)(e.$t("message.sign_tx_title")),1),(0,n.Lk)("div",K,[(0,n.bF)(f.A)])])]),(0,n.Lk)("div",{class:"overlay",onClick:t[1]||(t[1]=(0,i.D$)((e=>(0,s.R1)(a).emit("close_sign_tx_modal")),["prevent"]))})]))}};const $=(0,k.A)(T,[["__scopeId","data-v-231bea72"]]);var F=$;const W=e=>((0,n.Qi)("data-v-c7ebc2ca"),e=e(),(0,n.jt)(),e),j=o+"#ic_arrow_hor",B={class:"page_container claim_confirm"},Q={class:"cont"},X={class:"head"},I=W((()=>(0,n.Lk)("svg",{class:"icon"},[(0,n.Lk)("use",{"xlink:href":j})],-1))),J={class:"page_title"},N={class:"data"},U={class:"label"},D={class:"json_btn"},M={class:"info_wrap"},V={class:"info"},S={class:"logo"},q=["src"],G={class:"title"},P={class:"desc"},z={class:"memo"},H={class:"label"},O={class:"field"},Y={class:"btns"};var Z={__name:"ClaimConfirmPage",setup(e){const a=(0,u.o)(),t=(0,c.rd)(),o=(0,n.WQ)("emitter"),m=(0,n.WQ)("i18n"),p=(0,r.hN)(),_=(0,s.KR)(""),g=(0,s.KR)(!1),k=(0,s.KR)(!1);async function b(){g.value=!0;try{let e=[];a.stakedBalances.forEach((t=>{e.push({typeUrl:"/cosmos.distribution.v1beta1.MsgWithdrawDelegatorReward",value:{delegatorAddress:a.currentAddress,validatorAddress:t.validator_info.operator_address}})}));let n=await(0,d.nw)(e);0===n.code?(await a.getRewards(),p.notify({group:"default",clean:!0}),p.notify({group:"default",speed:200,duration:2e3,title:m.global.t("message.notification_tx_success_title"),type:"success"}),t.push("/account")):(console.log(n),f(n),g.value=!1)}catch(e){console.log(e),f(e),g.value=!1}}function f(e){let a="";a=e.code?m.global.t(`message.notification_tx_error_${e.code}`):m.global.t("message.notification_tx_error_rejected"),p.notify({group:"default",clean:!0}),p.notify({group:"default",title:m.global.t("message.notification_tx_error_title"),text:a,type:"error"})}return(0,n.hi)((()=>{o.off("auth"),o.off("close_sign_tx_modal")})),o.on("auth",(()=>{k.value=!1,b()})),o.on("close_sign_tx_modal",(()=>{k.value=!1})),(e,t)=>{const o=(0,n.g2)("router-link");return(0,n.uX)(),(0,n.CE)(n.FK,null,[(0,n.Lk)("section",B,[g.value?((0,n.uX)(),(0,n.Wv)(v.A,{key:0})):(0,n.Q3)("",!0),(0,n.Lk)("div",Q,[(0,n.Lk)("div",X,[(0,n.bF)(o,{to:"/account",class:"back_btn"},{default:(0,n.k6)((()=>[I])),_:1}),(0,n.Lk)("div",J,(0,l.v_)(e.$t("message.claim_rewards_page_title")),1)]),(0,n.Lk)("div",N,[(0,n.Lk)("div",U,[(0,n.eW)((0,l.v_)(e.$t("message.details_label"))+" ",1),(0,n.Lk)("button",D,[(0,n.Lk)("span",null,(0,l.v_)(e.$t("message.btn_json")),1)])]),(0,n.Lk)("div",M,[(0,n.Lk)("div",V,[(0,n.Lk)("div",S,[(0,n.Lk)("img",{src:(0,s.R1)(d.oB)((0,s.R1)(a).networks[(0,s.R1)(a).currentNetwork].chain_id),alt:""},null,8,q)]),(0,n.Lk)("div",null,[(0,n.Lk)("div",G,(0,l.v_)(e.$t("message.claim_rewards_title")),1),(0,n.Lk)("div",P,(0,l.v_)(e.$t("message.claim_rewards_desc")),1)])])])]),(0,n.Lk)("div",z,[(0,n.Lk)("div",H,(0,l.v_)(e.$t("message.memo_label")),1),(0,n.Lk)("div",O,[(0,n.bo)((0,n.Lk)("input",{type:"text",class:"input big","onUpdate:modelValue":t[0]||(t[0]=e=>_.value=e)},null,512),[[i.Jo,_.value]])])]),(0,n.bF)(h),(0,n.Lk)("div",Y,[(0,n.Lk)("button",{class:(0,l.C4)(["btn",{disabled:!(0,s.R1)(a).TxFee.isEnough}]),onClick:t[1]||(t[1]=(0,i.D$)((e=>k.value=!0),["prevent"]))},[(0,n.Lk)("span",null,(0,l.v_)(e.$t("message.btn_approve")),1)],2)])])]),k.value?((0,n.uX)(),(0,n.Wv)(F,{key:0})):(0,n.Q3)("",!0)],64)}}};const ee=(0,k.A)(Z,[["__scopeId","data-v-c7ebc2ca"]]);var ae=ee}}]);
//# sourceMappingURL=497.02463e8c.js.map